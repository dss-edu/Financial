<!DOCTYPE html>
{% extends 'temps/base.html' %}
{% load static %}
{% load custom_filters %}
{% block title %}
{{ school_name }}
{% endblock %}

{% block stylesheet %}
<link rel="stylesheet" href="{% static 'css/bs.css' %}">
<style>

  table.dataTable > thead .sorting::before,
  table.dataTable > thead .sorting_asc::before,
  table.dataTable > thead .sorting_desc::before,
  table.dataTable > thead .sorting_asc_disabled::before,
  table.dataTable > thead .sorting_desc_disabled::before {
    right: 0 !important;
    content: "" !important;
  }

  table.dataTable > thead .sorting::after,
  table.dataTable > thead .sorting_asc::after,
  table.dataTable > thead .sorting_desc::after,
  table.dataTable > thead .sorting_asc_disabled::after,
  table.dataTable > thead .sorting_desc_disabled::after {
    right: 0 !important;
    content: "" !important;
  }

  table.dataTable > thead > tr > th:not(.sorting_disabled),
  table.dataTable > thead > tr > td:not(.sorting_disabled) {
    padding-right: 0px;
    padding-left: 0px;
  }

  table.dataTable > thead > tr > th,
  table.dataTable > thead > tr > td {
    padding-right: 0px;
    padding-left: 0px;
  }

  .dataTables_wrapper .dataTables_paginate .paginate_button::before {
    padding: 1em 1em !important;
  }

  .dataTables_wrapper .dataTables_paginate .paginate_button::after {
    padding: 1em 1em !important;
  }

  .table thead th {

      padding: 5px 10px;
      font-weight: bold;
  }

  .table-hover>tbody>tr:hover>* {
    --bs-table-accent-bg: var(--bs-table-hover-bg);
    color: black;
   
}


table tbody td:nth-child(-n+3) {

  vertical-align: middle;
}
table tbody th:before {
  border-radius: 5px 0 0 5px;
  left: 5px;
  right: 5px;
}
a{
    color:black;
}
a:hover{
    color:#007bff;
    cursor: pointer;
}


.side-panel{
  width: 50px;
  background-color: rgba(255, 255, 255, 0);
  box-shadow: 0 0 10px rgba(0, 0, 0, 0);
  padding: 0px;
  height: 100%;
  position: fixed;
  right: 18px;
  top: 0;
 


}

.side{
  display: flex;
  flex-direction: column;
  align-items: end;
  justify-content: center;
}
.circle-container {
  border-radius: 50%;
  background-color: rgba(211, 211, 211, 0); /* Adjust the alpha value for transparency */
  width: 36px; /* Adjust the width and height to control the size of the circle */
  height: 36px;
  display: flex ;
  flex-direction: column ;
  align-items: center ;
  justify-content: center ;
  border: 1px solid gray; /* Black border */
  margin-bottom: 15px;
}

.circle-container-child {
    position: absolute;
    right: 50px;
    bottom: -25px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 3;
}

#table-box{
  padding-right: 50px;
  padding-left:50px;
  z-index: 2;
  flex-grow:0;
  border: 1px solid #ddd; /* Add a border to the table container */
 
  
  box-shadow: 0 0 5px rgba(0, 0, 0, .5);
}

.hidden-column {
  background-color: lightgreen!important;
 
}
.bg-light {
  background-color: white!important;
}
.header {

  top: 0;
  z-index: 1;
  background-color: rgba(200, 200, 200); 
}
#data-table-body td:first-child {
  border-left: 1px solid #dee2e6;
}

#data-table-body td:last-child {
  border-right: 1px solid #dee2e6;
}
.table-container{
  padding: 10px; /* Add some padding around the content */
}


.black-header{
  background-color:black;
  color:white;
}

.width150{
  width:80px !important;
}

.w-100{
  font-size: .8rem;
}

.modal-blur {
  filter: blur(5px);
  pointer-events: none; /* Prevent interaction with blurred content */
}

#myModal {
  backdrop-filter: blur(3px);
  font-size: .8rem;
}

.modal-content {

  border: 1px solid black !important;

}

.fa-solid.fa-chevron-down {
  font-size: 8px;
}

.fa-solid.fa-chevron-up {
  font-size: 8px;
}



</style>

{% endblock %}   
   
 

{% block body %}

<div class="modal" id="confirmation-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="height: 80%;">

      <div class="modal-body">
         <h4>Export Confirmation</h4>
        <p>Do you want the detailed view?</p>
      </div>
      <div class="modal-footer">
        <button type="button" id="confirm-yes" class="btn btn-primary">Yes</button>
        <button type="button" id="confirm-no" class="btn btn-secondary" data-dismiss="modal">No</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="spinner-modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered d-flex justify-content-center align-items-center" role="document">
                    <div class="text-center">
                        <div class="loading" role="status">
                            <h2>LOADING<h2>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
    </div>
</div> <!-- End of spinner modal -->

<div class="modal" id="myModal"  role="dialog"   
data-backdrop="static"
data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered"
  style="width: 95%; height: 80%; max-width: none; max-height: none">
    <div class="modal-content" style="height: 80%;">
      <div class="modal-body" style="max-height: 80%; overflow-y: auto;">
        <!-- Modify the table to display the data from the viewgl function -->
        <div id="modal-table-box">
        <table id="balancesheet-data-table" class="table table-hover w-100">
          <thead>
            {% if ascender == "True" %}
            <tr class="text-center black-header">
              <th class="text-center px-5">fund</th>
              <th class="text-center px-5">func</th>
              <th class="text-center px-5">obj</th>
              <th class="text-center px-5">AcctDescr</th>
              <th class="text-center px-5">Number</th>
              <th class="text-center px-5">Date</th>
              <th class="text-center px-5">AcctPer</th>
              <th class="text-center px-5">Real</th>
              <th class="text-center px-5">Expend</th>
              <th class="text-center px-5">Bal</th>
              <th class="text-center px-5">WorkDescr</th>
              <th class="text-center px-5">Type</th>
            </tr>

            {% else%}
            <tr class="text-center">
                <th class="px-3">fund</th>
                <th class="px-3">T</th>
                <th class="px-3">func</th>
                <th class="px-3">obj</th>
                {% comment %} <th class="px-3">sobj</th>
                <th class="px-3">org</th>
                <th class="px-3">PI</th>
                <th class="px-3">LOC</th> {% endcomment %}
                <th class="px-3">Date</th>
                <th class="px-3">Source</th>
                <th class="px-3">Subsource</th>
                <th class="px-3">Batch</th>
                <th class="px-3">Vendor</th>
                <th class="px-3">TransactionDescr</th>
                <th class="px-3">InvoiceDate</th>
                <th class="px-3">CheckNumber</th>
                <th class="px-3">CheckDate</th>
                <th class="px-3">Amount</th>
            </tr>
            {%endif%}
          </thead>
          <tbody id="modal-table-body">
            <!-- The data from the viewgl function will be populated here -->
          </tbody>
        </table>
        <div id="modal-total-div" style="display: flex;"></div>
      </div>
    </div>
      <div class="modal-footer">
        <table id="myModalFooter"></table>
        <br/>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        <a id="export-pdf-button2" class="navbar-brand mr-1 text-primary " href="#" data-toggle="tooltip" title="PDF"><i class="fas fa-file-pdf"></i></a>
        <a
          id="export-excel2-button"
          class="navbar-brand mr-1 text-primary"
          href="#"
          data-toggle="tooltip"
          title="CSV"
          ><i class="fas fa-file-excel"></i
        ></a>
      </div>
    </div>
  </div>
</div>


<div id="myModal2" class="modal" id="confirmation-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="height: 80%;">

      <div class="modal-body">
         
        <p id="modal-text"></p>
      </div>
      <div class="modal-footer">
     
        <button type="button" class="close" class="btn btn-secondary" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>
<script>
  document.getElementById('export-pdf-button2').addEventListener('click', function (event) {
    event.preventDefault(); 

    var element = document.getElementById('balancesheet-data-table');

    var rows = element.getElementsByTagName('tr');
  for (var i = 0; i < rows.length; i++) {
    var cells = rows[i].getElementsByTagName('td');
    var buttons = rows[i].getElementsByTagName('button');
    
    if (cells.length > 0) {
      rows[i].removeChild(cells[0]);
    }

    // Remove the expand buttons
    if (buttons.length > 0) {
      rows[i].removeChild(buttons[0].parentNode);
    }
  }

    var options = {
      margin: 2,
      filename: 'exported_table.pdf',
      image: { type: 'png', quality: 0.98 },
      html2canvas: {  scale: 1, 
        scrollX: 0,
        scrollY: 0,},
      jsPDF: { unit: 'mm', format: [600,600], orientation: 'portrait' },
    };

   
    html2pdf().set(options).from(element).save();
  });
</script>
<script>
  document
    .getElementById("export-excel2-button")
    .addEventListener("click", function (event) {
      event.preventDefault();

      var table = document.getElementById("balancesheet-data-table"); // Use the table containing the headers

      var wb = XLSX.utils.book_new();

      var ws = XLSX.utils.table_to_sheet(table);

      XLSX.utils.book_append_sheet(wb, ws, "Sheet1");

      var wbout = XLSX.write(wb, { bookType: "csv", type: "array" });

      var blob = new Blob([wbout], {
        type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
      });

      var link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "data.csv";
      link.click();
    });
</script>

 <div id="content-wrapper">
  
  <nav class="navbar navbar-expand navbar-light bg-light justify-content-end">

    <div class="d-flex align-items-center flex-grow-1 justify-content-center">
      <div class="col-2 small-font ">
        {% if ascender == "True" %} 
          {% with 'ascender' as school %}
          <img class="logo" src="{% static 'logos/'|add:school|add:'.png' %}" title=""  alt="school logo" style="height:35px;">
          {% endwith %}
        {% else %}
          {% with 'skyward' as school %}
          <img class="logo" src="{% static 'logos/'|add:school|add:'.png' %}" title="" alt="school logo" style="height:35px;">
          {% endwith %}
        {% endif %}

        
        CDN : {{ iconStatusCode }}

    </div>

    <div class="col-8">
      <h5 class="text-center" style="color: black;">
        {{ school_name }} 
      </h5>
    </div>
    <div class="col-2">
     

    </div>
  </div>
  {% comment %} <div class="d-flex align-items-center">


    <a
    class="navbar-brand mr-4 text-secondary"
    id="showCurrentMonth"
    data-toggle="tooltip"
    title="SHOW CURRENT MONTH"
    style="margin-right: 500px"
    >
    <i class="fa-solid fa-receipt"></i>
  </a>

      <a class="navbar-brand mr-4 text-secondary" href="/profit-loss-charts/{{ school }}" data-toggle="tooltip" title="CHART" style="margin-right:500px;"><i class="fas fa-chart-bar"></i></a>
      
      <a id="export-excel-button" class="navbar-brand mr-4 text-secondary" href="#" data-toggle="tooltip" title="Export to Excel"><i class="fas fa-file-excel"></i></a>
  </div>


  {% if role == "admin" %}
 
  <a class="navbar-brand mr-3 text-secondary " id="settings-nav" href="#" data-toggle="tooltip" title="settings"><i class="fa-solid fa-gear"></i></a>
  {% endif %}

  <div id="edit-container" class="mr-2">
    <button id="edit-button" class="btn btn-sm btn-secondary" type="button" style=" float: right; color: white;">Edit</button>
</div>
  <div id="cancel-container" style="display: none;" class="mr-2">
      <button id="cancel-button" class="btn btn-sm btn-secondary" type="button" style=" float: right; margin-left: 10px; color: white;" >Cancel</button>
  </div> {% endcomment %}


  </nav>



  <div class="table-container" >
    <div class="side-panel">
      <div class="side">
        <div style="margin-top:300px">
        </div>
    
        <script>    
          {% if last_month_number == 12 %}
            var presentYear = {{ present_year }} - 1;
          
          {% else %}
            var presentYear = {{ present_year }};
          {% endif %}
          var FY = parseInt({{ FY_year_1 }}, 10);
        </script>
    
        {%if FY == presentYear  %}

          <a
          class="text-secondary circle-container"
          id="showCurrentMonth"
          data-toggle="tooltip"
          title="Show Current Month"
          data-placement="left"
          >
          <i class="fa-solid fa-receipt"></i>
        </a>

        <a
        class="text-secondary circle-container"
        id="hideCurrentMonth"
        data-toggle="tooltip"
        title="Hide Current Month"
        data-placement="left"
        style="display:none;"
        >
        <i class="fa-solid fa-receipt"></i>
        </a>


        {%endif %}


      <a 
      class="circle-container text-secondary" 
      href="/profit-loss-charts/{{ school }}" 
      data-toggle="tooltip" 
      data-placement="left"
      title="Chart" 
      >
      <i class="fas fa-chart-bar"></i></a>

      <a id="toggle-ui" class="text-secondary circle-container" href="#" data-toggle="tooltip" title="Show Printable Sheet" data-placement="left">
        <i class="fas fa-vector-square"></i>
      </a>


      <!--{% if ascender == "True"%}
            {% if '/balance-sheet-asc/' in request.path %}
            <a id="toggle-data" class="text-secondary circle-container" href="#" data-toggle="tooltip" title="Show FY Based" data-placement="left">
              <i class="fa-solid fa-hashtag"></i>
            </a>
            {% else %}
            <a id="toggle-data-asc" class="text-secondary circle-container" href="#" data-toggle="tooltip" title="Show OCL Based" data-placement="left">
              <i class="fa-solid fa-hashtag"></i>
            </a>
            {% endif %}
      {% endif %} -->

      <script>
        $('#toggle-ui').on('click', function(){
          $('#table-box').toggleClass('d-none')
          $('#new-ui').toggleClass('d-none')
          $('#insert-row-form').toggleClass('vh-100')
          $('#showmonths').toggle();
          $('#showSheet').prop('checked', false);

          if ($('#table-box').hasClass('d-none')) {
          
            $('#showCurrentMonth').addClass('d-none');
        }else{
          $('#showCurrentMonth').removeClass('d-none');

        }

          var newTitle = $('#insert-row-form').hasClass('vh-100') ? 'Show Printable Sheet' : 'Show Clear Table';
          $('#toggle-ui').attr('title', newTitle);
          $('#toggle-ui').tooltip('dispose').tooltip({ title: newTitle });

        })

       /* $(document).ready(function() {
          $('#showSheet').on('change', function(){
           console.log("sheet")
           $('#toggle-ui').click();

          });
        });*/

        document.addEventListener("DOMContentLoaded", function() {
          if ($('#table-box').hasClass('d-none')) {
          
            $('#showCurrentMonth').addClass('d-none');
        }else{
          $('#showCurrentMonth').removeClass('d-none');

        }

          const school = $("#hidden-school").val();
          const year = $("#hidden-year").val();
          console.log("school",school)
          console.log("year",year)
          const currentPath = window.location.pathname;

          $("#toggle-data").on("click", function(event) {
            event.preventDefault();
            if (year) {
              window.location.href = "/balance-sheet/" + school + "/" + year;
            } else {
                window.location.href = "/balance-sheet/" + school;
            }
        });

        $("#toggle-data-asc").on("click", function(event) {
          event.preventDefault();
          if (year) {
            window.location.href = "/balance-sheet-asc/" + school + "/" + year;
          } else {
              window.location.href = "/balance-sheet-asc/" + school;
          }
      });


              if (currentPath.includes('asc')) {
            $('#toggleOCL').prop('checked', false);
          }
    $("#toggleOCL").on("change", function(event) {
        event.preventDefault();
        
        if ($(this).is(':checked')){

          if (year) {
            window.location.href = "/balance-sheet/" + school + "/" + year;
            } else {
              window.location.href = "/balance-sheet/" + school;
            }
            
          }else{
           
          if (year) {
            window.location.href = "/balance-sheet-asc/" + school + "/" + year;
            } else {
              window.location.href = "/balance-sheet-asc/" + school;
            }

        }
    });


    
        })
      </script>


      
      
      <div style="position: relative; display: flex;flex-direction: column; justify-content: center; align-items: end;">
        <a id="export-button" class="text-secondary circle-container" href="#" data-toggle="tooltip" title="Export Page" data-placement="left">
            <i class="fas fa-download"></i>
        </a>
        <script>
          $('#export-button').on('click', function (e) {
            e.preventDefault()
            $(this).tooltip('hide');
            $('#export-children').toggle()
          })

        </script>

        <div id="export-children" class="circle-container-child" style="display: none;">
          <a id="export-excel-button" class="text-secondary circle-container" href="#" data-toggle="tooltip" title="Export to Excel" data-placement="left" >
              <i class="fas fa-file-excel"></i>
          </a>

          <a id="export-pdf-button" class="text-secondary circle-container" href="#" data-toggle="tooltip" title="Export to PDF" data-placement="left">
              <i class="fas fa-file-pdf"></i>
          </a>
        </div>
      </div>
 


  {% if role == "admin" %}
 
  <a class="text-secondary circle-container " 
  id="settings-nav"
  href="#" 
  data-toggle="tooltip"
  title="Settings"
  data-placement="left"
    >
    <i class="fa-solid fa-gear"></i></a>
  {% endif %}




  <a 
  class="text-secondary circle-container "
  id ="edit-button"
  data-toggle="tooltip" 
  title="Edit"
  data-placement="left"

  >
  <i class="fa-solid fa-pen-to-square margintop"

   ></i>
</a>

<a 
class="text-secondary circle-container "
id ="cancel-button"
data-toggle="tooltip" 
title="Cancel"
data-placement="left"
style="display:none;"
>
<i class="fa-solid fa-ban margintop" ></i>
</a>



      </div> <!-- end of side class -->
  
    </div> <!-- end of side-panel -->

<form  id="insert-row-form" class="vh-100" action="{% url 'update_row' school FY_year_1 %}" method="POST">
  {% if role == "admin" %}


<div id="save-container" style="display: none;">
    <button id="save-button" class="btn btn-sm btn-secondary" style="float: right; margin-left: 10px; margin-top:5px; margin-bottom:5px;  color:white;" >Save</button>
</div>

<script>
    document.getElementById("edit-button").addEventListener("click", function() {

        // Hide the "Edit" container
        document.getElementById("edit-button").style.display = "none";

        // Show the "Save" container
        document.getElementById("save-container").style.display = "block";
        document.getElementById("cancel-button").style.display = "flex";
        

        
        var valueCells = document.querySelectorAll("[id^='value-cell-']");
        valueCells.forEach(function(cell) {
            cell.contentEditable = "true";
            
        });
          var editableTds = document.querySelectorAll('td[contenteditable="true"]');
          editableTds.forEach(function (td) {
              td.addEventListener('input', function() {
                    var rowId = td.getAttribute('data-row-id');  
                    
                    var newValue = td.textContent.replace(/[\r\n\s]+/g, '');             
                    if (!newValue) {
                      newValue = 0;
                  }  
                  console.log(newValue,rowId)               
                    document.querySelector('#hidden-fye-' + rowId).value = newValue;          
              });
          });       
    });

    document.getElementById("cancel-button").addEventListener("click", function() {
        // Hide the "Save" container
        document.getElementById("save-container").style.display = "none";
        document.getElementById("cancel-button").style.display = "none";
        
        // Show the "Edit" container
        document.getElementById("edit-button").style.display = "flex";
  
        var valueCells = document.querySelectorAll("[id^='value-cell-']");
        valueCells.forEach(function(cell) {
            cell.contentEditable = "false";
        });
        
    });
</script>

    {% endif %}
  {% csrf_token %}

  {% include 'mockup/balance-sheet.html' %}

  <div id="table-box" class="d-none">
    <table id="data-table-overview" class="table table-hover" style="display:none;width:auto;"></table>
    <table id="data-table" class="table table-hover" style="width:auto;">
        <thead>
           <tr>
            <th class="firstcolumn"  ></th>
            <th></th>
           
         
            <th colspan="16" style="white-space: nowrap; text-align: center;">

                <h5 style="text-align: center;">FY{{FY_year_1}}-{{FY_year_2}} Balance Sheet <br></h5>
                <h5 style="text-align: center; display: inline; padding-left:100px;">as of {{last_month}}</h5>
                <div style="float: right">
                  <select class="d-flex" name="fyear" id="old-month-select">
                      <option value="" selected>select month</option> 
                      {% for month_number, month_name in view_months %}
                      <option value="{{ month_number }}">{{ month_name }}</option>
                      {% endfor %}
        
                  </select>
              
                <a
                  id="toggle-button"
                  class="expand-button"
                  onclick="toggleColumns(); hide17thColumn();"
                  style=""
                >
                <i id="toggle-icon" class="fa-solid fa-chevron-right" style="color: #756c70;"></i>
              </a>
            </div>
            </th>
           
            
        </tr> 
       <!-- <tr >
           <script>
            for (var i = 0; i <= 17; i++){
              if (i===1){
                document.write(`<td  class="firstcolumn" style="color: blue;">{{i}}</td>`);
                
              }
              else if (i === 17 ) {
                document.write(`<td style="text-align: right;"><button id="toggle-button" type="button" class="expand-button" onclick="toggleColumns(); hide17thColumn(); " >+</button></td>`);
              }
              else if(i>=3 && i<=15){
                document.write(`<td  class="collapsed" style="background-color: blue;"></td>`);
              }
              else{
                document.write(`<td  style="color: blue;">></td>`);
              }
            }
            <td class="firstcolumn" style="border-top:0px!important;"></td>
            <td class="" style="border-top:0px!important;"></td>
            <td class=""></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class="collapsed"></td>
            <td class=""></td>
            <td ></td>
            <td style="text-align: right;"></td>
      
          
        </tr>-->


    </thead>
    <tbody id="data-table-body">


      {% if September == "True" %}

      <script>
        var last_month_number = parseInt("{{last_month_number}}", 10); // Parse it as an integer
         // Add 11 to it
        if (last_month_number >= 9) {
          last_month_number -= 3;
      } 
      else {
          last_month_number += 9;
      }
        
        function hide17thColumn() {
          for (var i = last_month_number; i <= 16; i++) {
            var columnsToHide = document.querySelectorAll(
              "#data-table th:nth-child(" +
                i +
                "), #data-table td:nth-child(" +
                i +
                ")"
            );
        
            for (var j = 0; j < columnsToHide.length; j++) {
                columnsToHide[j].style.display = "none";
            }
        }
        if(showcurr == 'True'){
          showcurrentMonth();
          }else{
            hidecurrentMonth();
          }
      }
      </script> 
{% else %}
      <script>
        var last_month_number = parseInt("{{last_month_number}}", 10); // Parse it as an integer
         // Add 11 to it
        if (last_month_number <= 6 ) {
          last_month_number += 10
      } 
      else {
          last_month_number -= 1;
      }
        
        function hide17thColumn() {
          for (var i = last_month_number; i <= 16; i++) {
            var columnsToHide = document.querySelectorAll("#data-table th:nth-child(" + i + "),#data-table td:nth-child(" + i + ")");
        
            for (var j = 0; j < columnsToHide.length; j++) {
                columnsToHide[j].style.display = "none";
            }
        }
        if(showcurr == 'True'){
          showcurrentMonth();
          }else{
            hidecurrentMonth();
          }
      }
    
      </script>
      {% endif %}
        <tr class="header">
            <th class="firstcolumn"></th>
            <th></th>
            <th>YE: {% if September == "True" %} August {% else %} June {% endif %}</th>
            <th style="text-align: center;">
              
              FYE {{FY_year_1}}
            </th>
            {% if September == "True" %}
            <th class="collapsed" style="text-align: center;">September</th>
            <th class="collapsed" style="text-align: center;">October</th>
            <th class="collapsed" style="text-align: center;">November</th>
            <th class="collapsed" style="text-align: center;">December</th>
            <th class="collapsed" style="text-align: center;">January</th>
            <th class="collapsed" style="text-align: center;">February</th>
            <th class="collapsed" style="text-align: center;">March</th>
            <th class="collapsed" style="text-align: center;">April</th>
            <th class="collapsed" style="text-align: center;">May</th>
            <th class="collapsed" style="text-align: center;">June</th>
            <th class="collapsed" style="text-align: center;">July</th>
            <th class="collapsed" style="text-align: center;">August</th>
            {% else %}
            <th class="collapsed" style="text-align: center;">July</th>
            <th class="collapsed" style="text-align: center;">August</th>
            <th class="collapsed" style="text-align: center;">September</th>
            <th class="collapsed" style="text-align: center;">October</th>
            <th class="collapsed" style="text-align: center;">November</th>
            <th class="collapsed" style="text-align: center;">December</th>
            <th class="collapsed" style="text-align: center;">January</th>
            <th class="collapsed" style="text-align: center;">February</th>
            <th class="collapsed" style="text-align: center;">March</th>
            <th class="collapsed" style="text-align: center;">April</th>
            <th class="collapsed" style="text-align: center;">May</th>
            <th class="collapsed" style="text-align: center;">June</th>
            {% endif %}
            <th style="text-align: center;">FYTD Activity</th>
            <th style="text-align: center;">As of {{last_month_name}}</th>
        </tr>



        <tr id="ttl-row" class="ttl-lr-row">
          <td class="firstcolumn"></td>
          <td></td>
          <td><strong>Assets</strong></td>
          <script>
            for (var i = 3; i <= 17; i++) {
              if (i >= 4 && i <= 15) {
                document.write(`<td class="collapsed" ></td>`);
              } else {
                document.write(`<td ></td>`);
              }
            }
          </script>
      </tr>

        <tr >
          <td class="firstcolumn"></td>
          <td></td>
          <td>Current Assets</td>
          <td></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"></td>
          <td class="collapsed"> </td>
          <td class="collapsed"></td>
          <td></td>
          <td></td>
        </tr>
      


    {% for row in data_balancesheet %}
    {% if row.school == school and row.Category == 'Assets' and row.Subcategory == 'Current Assets' %}


    <tr id="row1-{{ forloop.counter }}" class="dom current-assets-row">
      <td class="firstcolumn">
       
        <a
        id="row{{ counters }}"
        class="expand-button"
        onclick="oldshowHideSubs(event); "
        >
      <i id="row{{ counters }}-icon" class="fa-solid fa-chevron-down" style="color: #756c70;"></i>
      </td>
      <td>
        <input type="hidden"  name="updateID[]" value="{{row.BS_id}}" >
        <input type="hidden"  name="updatefye[]" value="{{row.FYE}}" id="hidden-fye-{{row.BS_id}}">
      </td>
      <td class="space-before">{{row.Description}} {{ counters }} </td>
      <td id="value-cell-{{ forloop.counter }}" data-row-id="{{row.BS_id}}" contenteditable="false" class="right-align-td">

        <div >{% if ascender == "False" or school_bs == 'True' %}{{row.total_fye}}{%else%}{{row.FYE}}{%endif%}</div>
      </td>
      {% if September == "True" %}
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.difference_9}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.difference_10}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.difference_11}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.difference_12}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.difference_1}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.difference_2}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.difference_3}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.difference_4}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.difference_5}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.difference_6}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.difference_7}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.difference_8}}</a></td>
      {% else %}
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.difference_7}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.difference_8}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.difference_9}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.difference_10}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.difference_11}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.difference_12}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.difference_1}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.difference_2}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.difference_3}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.difference_4}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.difference_5}}</a></td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.difference_6}}</a></td>
      {% endif %}

      <td class="right-align-td">{{row.fytd}}</td>
      <td class="right-align-td">{{row.last_month_difference}}</td>
    </tr> 


    {% for item in data_activitybs %}
    {% if item.Activity == row.Activity %}

      <tr  id="row{{counters}}-{{ forloop.counter }}" class="sub d-none balancesheet-activity-row {{row.Activity}}-section">
      <td class="firstcolumn">

      </td>
      <td>{{item.obj}}</td>
      <td class="space-before">{{item.obj}} - {{item.Description2}} {{ counters }}</td>
      <td class="right-align-td">{% if ascender == "False" or school_bs == 'True' %}{{ item.activity_fye }}{% endif %}</td>

      {% if September == "True" %}
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
      {% else %}
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
      {% endif %}
      <td class="right-align-td">{{item.fytd}}</td>
      <td class="right-align-td">{{item.last_month_bal}}</td>
      </tr>


    {% endif %}
    {% endfor %}
    {% endif %}
    {% endfor %}

      <tr id="ttl-row"  class="total-assets-row">
        <td class="firstcolumn"></td>
        <td></td>
        <td class="space-before-total "><strong>Total Current Assets</strong></td>
        <td id="current-assets-total-3" class="right-align-td top-border">{{totals_bs.total_current_assets_fye}}</td>
        {% if September == "True" %}
        <td id="current-assets-total-4" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.09}}</td>
        <td id="current-assets-total-5" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.10}}</td>
        <td id="current-assets-total-6" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.11}}</td>
        <td id="current-assets-total-7" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.12}}</td>
        <td id="current-assets-total-8" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.01}}</td>
        <td id="current-assets-total-9" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.02}}</td>
        <td id="current-assets-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.03}}</td>
        <td id="current-assets-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.04}}</td>
        <td id="current-assets-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.05}}</td>
        <td id="current-assets-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.06}}</td>
        <td id="current-assets-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.07}}</td>
        <td id="current-assets-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.08}}</td>

        {% else %}
        <td id="current-assets-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.07}}</td>
        <td id="current-assets-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.08}}</td>
        <td id="current-assets-total-4" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.09}}</td>
        <td id="current-assets-total-5" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.10}}</td>
        <td id="current-assets-total-6" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.11}}</td>
        <td id="current-assets-total-7" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.12}}</td>
        <td id="current-assets-total-8" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.01}}</td>
        <td id="current-assets-total-9" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.02}}</td>
        <td id="current-assets-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.03}}</td>
        <td id="current-assets-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.04}}</td>
        <td id="current-assets-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.05}}</td>
        <td id="current-assets-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_current_assets.06}}</td>
        {% endif %}
        <td id="current-assets-total-16" class="right-align-td top-border" >{{totals_bs.total_current_assets_fytd}}</td>
        <td id="current-assets-total-17" class="right-align-td top-border" >{{totals_bs.last_month_current_assets}}</td>        
    </tr>

    


      

      <tr >
        <td class="firstcolumn"> </td>
        <td></td>
        <td>Capital Assets , Net</td>
        <td></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"></td>
        <td class="collapsed"> </td>
        <td class="collapsed"></td>
        <td></td>
        <td></td>
      </tr>
             


      {% for row in data_balancesheet %}
      {% if row.school == school and row.Category == 'Assets' and row.Subcategory == 'Capital Assets, Net'  %}
      <tr id="row2-{{ forloop.counter }}" class="dom capital-assets-row">
        <td class="firstcolumn">
          
          <a
          id="row26"
          class="expand-button"
          onclick="oldshowHideSubs(event); "
          >
        <i id="row26-icon" class="fa-solid fa-chevron-down" style="color: #756c70;"></i>
        </td>
        <td>
          <input type="hidden"  name="updateID[]" value="{{row.BS_id}}" >
          <input type="hidden"  name="updatefye[]" value="{{row.FYE}}" id="hidden-fye-{{row.BS_id}}">
        </td>
        <td class="space-before">{{row.Description}}</td>
        <td id="value-cell-{{ forloop.counter }}" data-row-id="{{row.BS_id}}" contenteditable="false" class="right-align-td">

          <div >{% if ascender == "False" or school_bs == 'True'  %}{{row.total_fye}}{%else%}{{row.FYE}}{%endif%}</div>
        </td>
        {% if September == "True" %}
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.difference_9}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.difference_10}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.difference_11}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.difference_12}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.difference_1}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.difference_2}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.difference_3}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.difference_4}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.difference_5}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.difference_6}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.difference_7}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.difference_8}}</a></td>
        {% else %}
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.difference_7}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.difference_8}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.difference_9}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.difference_10}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.difference_11}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.difference_12}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.difference_1}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.difference_2}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.difference_3}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.difference_4}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.difference_5}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.difference_6}}</a></td>
        {% endif %}

        <td class="right-align-td">{{row.fytd}}</td>
        <td class="right-align-td">{{row.last_month_difference}}</td>
      </tr>

      {% for item in data_activitybs %}
      {% if item.Activity == row.Activity%}

      <tr id="row26-{{ forloop.counter }}" class="sub d-none balancesheet-activity-row {{row.Activity}}-section">
      <td class="firstcolumn">
      
      </td>
      <td>{{item.obj}}</td>
      <td class="space-before">{{item.obj}} - {{item.Description2}}</td>
      <td class="right-align-td">{% if ascender == "False" or school_bs == 'True' %}{{ item.activity_fye }}{% endif %}</td>
      {% if September == "True" %}
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
      {% else %}
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
      <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
      {% endif %}
      <td class="right-align-td">{{item.fytd}}</td>
      <td class="right-align-td">{{item.last_month_bal}}</td>
      </tr>


      {% endif %}
      {% endfor %}
      {% endif %}
      {% endfor %}
      <tr id="ttl-row" class="total-assets-row">
            <td class="firstcolumn"> </td>
            <td></td>
            <td class="space-before-total"><strong>Total Capital Assets</strong></td>
            <td id="capital-assets-total-3" class="right-align-td top-border">{{totals_bs.total_capital_assets_fye}}</td>
            {% if September == "True" %}
            <td id="capital-assets-total-4" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.09}}</td>
            <td id="capital-assets-total-5" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.10}}</td>
            <td id="capital-assets-total-6" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.11}}</td>
            <td id="capital-assets-total-7" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.12}}</td>
            <td id="capital-assets-total-8" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.01}}</td>
            <td id="capital-assets-total-9" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.02}}</td>
            <td id="capital-assets-total-10" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.03}}</td>
            <td id="capital-assets-total-11" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.04}}</td>
            <td id="capital-assets-total-12" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.05}}</td>
            <td id="capital-assets-total-13" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.06}}</td>
            <td id="capital-assets-total-14" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.07}}</td>
            <td id="capital-assets-total-15" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.08}}</td>
            {% else %}
            <td id="capital-assets-total-14" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.07}}</td>
            <td id="capital-assets-total-15" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.08}}</td>
            <td id="capital-assets-total-4" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.09}}</td>
            <td id="capital-assets-total-5" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.10}}</td>
            <td id="capital-assets-total-6" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.11}}</td>
            <td id="capital-assets-total-7" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.12}}</td>
            <td id="capital-assets-total-8" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.01}}</td>
            <td id="capital-assets-total-9" class="collapsed right-align-td top-border" >{{totals_bs.total_capital_assets.02}}</td>
            <td id="capital-assets-total-10" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.03}}</td>
            <td id="capital-assets-total-11" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.04}}</td>
            <td id="capital-assets-total-12" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.05}}</td>
            <td id="capital-assets-total-13" class="collapsed right-align-td top-border">{{totals_bs.total_capital_assets.06}}</td>
            {% endif %}
            <td id="capital-assets-total-16" class="right-align-td top-border">{{totals_bs.total_capital_assets_fytd}}</td>
            <td id="capital-assets-total-17" class="right-align-td top-border">{{totals_bs.last_month_total_capital_assets}}</td>
        </tr>

        <tr id="total-assets-total-row" class="ttl-lr-row">
          <td class="firstcolumn"></td>
          <td></td>
          <td ><strong>Total Assets</strong></td>
          <td id="total-assets-total-3" class="right-align-td">{{totals_bs.total_assets_fye}}</td>
          {% if September == "True" %}
          <td id="total-assets-total-4" class="collapsed right-align-td"  >{{totals_bs.total_assets.09}}</td>
          <td id="total-assets-total-5" class="collapsed right-align-td"  >{{totals_bs.total_assets.10}}</td>
          <td id="total-assets-total-6" class="collapsed right-align-td"  >{{totals_bs.total_assets.11}}</td>
          <td id="total-assets-total-7" class="collapsed right-align-td"  >{{totals_bs.total_assets.12}}</td>
          <td id="total-assets-total-8" class="collapsed right-align-td"  >{{totals_bs.total_assets.01}}</td>
          <td id="total-assets-total-9" class="collapsed right-align-td"  >{{totals_bs.total_assets.02}}</td>
          <td id="total-assets-total-10" class="collapsed right-align-td" >{{totals_bs.total_assets.03}}</td>
          <td id="total-assets-total-11" class="collapsed right-align-td" >{{totals_bs.total_assets.04}}</td>
          <td id="total-assets-total-12" class="collapsed right-align-td" >{{totals_bs.total_assets.05}}</td>
          <td id="total-assets-total-13" class="collapsed right-align-td" >{{totals_bs.total_assets.06}}</td>
          <td id="total-assets-total-14" class="collapsed right-align-td" >{{totals_bs.total_assets.07}}</td>
          <td id="total-assets-total-15" class="collapsed right-align-td" >{{totals_bs.total_assets.08}}</td>

          {% else %}
          <td id="total-assets-total-14" class="collapsed right-align-td" >{{totals_bs.total_assets.07}}</td>
          <td id="total-assets-total-15" class="collapsed right-align-td" >{{totals_bs.total_assets.08}}</td>
          <td id="total-assets-total-4" class="collapsed right-align-td"  >{{totals_bs.total_assets.09}}</td>
          <td id="total-assets-total-5" class="collapsed right-align-td"  >{{totals_bs.total_assets.10}}</td>
          <td id="total-assets-total-6" class="collapsed right-align-td"  >{{totals_bs.total_assets.11}}</td>
          <td id="total-assets-total-7" class="collapsed right-align-td"  >{{totals_bs.total_assets.12}}</td>
          <td id="total-assets-total-8" class="collapsed right-align-td"  >{{totals_bs.total_assets.01}}</td>
          <td id="total-assets-total-9" class="collapsed right-align-td"  >{{totals_bs.total_assets.02}}</td>
          <td id="total-assets-total-10" class="collapsed right-align-td" >{{totals_bs.total_assets.03}}</td>
          <td id="total-assets-total-11" class="collapsed right-align-td" >{{totals_bs.total_assets.04}}</td>
          <td id="total-assets-total-12" class="collapsed right-align-td" >{{totals_bs.total_assets.05}}</td>
          <td id="total-assets-total-13" class="collapsed right-align-td" >{{totals_bs.total_assets.06}}</td>
          {% endif %}
          <td id="total-assets-total-16" class="right-align-td">{{totals_bs.total_assets_fye_fytd}}</td>
          <td id="total-assets-total-17" class="right-align-td">{{totals_bs.last_month_total_assets}}</td>
       
      </tr>

      <tr id="ttl-row" class="ttl-lr-row">
        <td class="firstcolumn"></td>
        <td></td>
        <td><strong>Liabilities and Net Assets</strong></td>
        <script>
          for (var i = 3; i <= 17; i++) {
            if (i >= 4 && i <= 15) {
              document.write(`<td  class="collapsed" ></td>`);
            } else {
              document.write(`<td ></td>`);
            }
          }
        </script>
    </tr>




    <tr id="ttl-row" class="ttl-lr-row">
      <td class="firstcolumn"></td>
      <td></td>
      <td>Current Liabilities</td>
      <script>
        for (var i = 3; i <= 17; i++) {
          if (i >= 4 && i <= 15) {
            document.write(`<td  class="collapsed" ></td>`);
          } else {
            document.write(`<td  ></td>`);
          }
        }
      </script>
  </tr>





  {% for row in data_balancesheet %}
  {% if row.school == school and row.Category == 'Liabilities and Net Assets' and row.Subcategory == 'Current Liabilities' %}
       
        <tr id="row3-{{ forloop.counter }}" class="dom current-liabilities-row">
          <td class="firstcolumn">
            <a
      
            class="expand-button"
            onclick="oldshowHideSubs(event); "
            >
          <i id="" class="fa-solid fa-chevron-down" style="color: #756c70;"></i>
          </td>
          <td>
            <input type="hidden"  name="updateID[]" value="{{row.BS_id}}" >
            <input type="hidden"  name="updatefye[]" value="{{row.FYE}}" id="hidden-fye-{{row.BS_id}}">
          </td>
          <td class="space-before">{{row.Description}} </td>
          <td id="value-cell-{{ forloop.counter }}" data-row-id="{{row.BS_id}}" contenteditable="false" class="right-align-td">

            <div >{% if ascender == "False" or school_bs == 'True'  %}{{row.total_fye}}{%else%}{{row.FYE}}{%endif%}</div>
          </td>
          {% if September == "True" %}
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.debt_9}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.debt_10}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.debt_11}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.debt_12}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.debt_1}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.debt_2}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.debt_3}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.debt_4}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.debt_5}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.debt_6}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.debt_7}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.debt_8}}</a></td>
          {% else %}
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.debt_7}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.debt_8}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.debt_9}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.debt_10}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.debt_11}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.debt_12}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.debt_1}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.debt_2}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.debt_3}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.debt_4}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.debt_5}}</a></td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.debt_6}}</a></td>
          {% endif %}

          <td class="right-align-td">{{row.debt_fytd}}</td>
          <td class="right-align-td">{{row.last_month_debt}}</td>

        </tr>


        {% for item in data_activitybs %}
        {% if item.Activity == row.Activity %}
        
        <tr id="" class="sub d-none liabilities-activity-row {{row.Activity}}-section">
          <td class="firstcolumn">
          </td>
          <td>{{item.obj}}</td>
          <td class="space-before">{{item.obj}} - {{item.Description2}}</td>
          <td class="right-align-td">{% if ascender == "False" or school_bs == 'True' %}{{ item.activity_fye }}{% endif %}</td>
          {% if September == "True" %}
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
          {% else %}
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
          <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
          {% endif %}
          <td class="right-align-td">{{item.fytd}}</td>
          <td class="right-align-td">{{item.last_month_bal}}</td>
        </tr>

    {% endif %}
  {% endfor %}

  {% endif %}
  {% endfor %}

  <tr id="ttl-row" >
    <td class="firstcolumn"></td>
     <td></td>
     <td class="space-before-total"><strong>Total Current Liabilities</strong></td>
     <td id="current-liabilities-total-3" class="right-align-td top-border">{{totals_bs.total_current_liabilities_fye}}</td>
     {% if September == "True" %}
     <td id="current-liabilities-total-4" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.09}}</td>
     <td id="current-liabilities-total-5" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.10}}</td>
     <td id="current-liabilities-total-6" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.11}}</td>
     <td id="current-liabilities-total-7" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.12}}</td>
     <td id="current-liabilities-total-8" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.01}}</td>
     <td id="current-liabilities-total-9" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.02}}</td>
     <td id="current-liabilities-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.03}}</td>
     <td id="current-liabilities-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.04}}</td>
     <td id="current-liabilities-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.05}}</td>
     <td id="current-liabilities-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.06}}</td>
     <td id="current-liabilities-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.07}}</td>
     <td id="current-liabilities-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.08}}</td>
     {% else %}
     <td id="current-liabilities-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.07}}</td>
     <td id="current-liabilities-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.08}}</td>
     <td id="current-liabilities-total-4" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.09}}</td>
     <td id="current-liabilities-total-5" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.10}}</td>
     <td id="current-liabilities-total-6" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.11}}</td>
     <td id="current-liabilities-total-7" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.12}}</td>
     <td id="current-liabilities-total-8" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.01}}</td>
     <td id="current-liabilities-total-9" class="collapsed right-align-td top-border"  >{{totals_bs.total_current_liabilities.02}}</td>
     <td id="current-liabilities-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.03}}</td>
     <td id="current-liabilities-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.04}}</td>
     <td id="current-liabilities-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.05}}</td>
     <td id="current-liabilities-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_current_liabilities.06}}</td>
     {% endif %}
     <td id="current-liabilities-total-16" class="right-align-td top-border">{{totals_bs.total_current_liabilities_fytd}}</td>
     <td id="current-liabilities-total-17" class="right-align-td top-border">{{totals_bs.last_month_total_current_liabilities}}</td>
     
</tr>


{% for row in data_balancesheet %}
{% if row.school == school and row.Category == 'Liabilities and Net Assets' and row.Subcategory == 'Noncurrent Liabilities' %}


     
      <tr id="row3-{{ forloop.counter }}" class="dom noncurrent-liabilities-row">
        <td class="firstcolumn">
          <a
          id="row27"
          class="expand-button"
          onclick="oldshowHideSubs(event); "
          >
        <i id="row27-icon" class="fa-solid fa-chevron-down" style="color: #756c70;"></i>
        </td>
        <td>
          <input type="hidden"  name="updateID[]" value="{{row.BS_id}}" >
          <input type="hidden"  name="updatefye[]" value="{{row.FYE}}" id="hidden-fye-{{row.BS_id}}">
        </td>
        <td class="space-before">{{row.Description}} </td>
        <td id="value-cell-{{ forloop.counter }}" data-row-id="{{row.BS_id}}" contenteditable="false" class="right-align-td">

          <div >{% if ascender == "False" or school_bs == 'True'  %}{{row.total_fye}}{%else%}{{row.FYE}}{%endif%}</div>
        </td>
        {% if September == "True" %}
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.debt_9}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.debt_10}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.debt_11}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.debt_12}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.debt_1}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.debt_2}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.debt_3}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.debt_4}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.debt_5}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.debt_6}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.debt_7}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.debt_8}}</a></td>
        {% else %}
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="07">{{row.debt_7}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="08">{{row.debt_8}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="09">{{row.debt_9}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="10">{{row.debt_10}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="11">{{row.debt_11}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="12">{{row.debt_12}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="01">{{row.debt_1}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="02">{{row.debt_2}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="03">{{row.debt_3}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="04">{{row.debt_4}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="05">{{row.debt_5}}</a></td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link {{row.Activity}}-total" data-yr="06">{{row.debt_6}}</a></td>
        {% endif %}

        <td class="right-align-td">{{row.debt_fytd}}</td>
       
        <td class="right-align-td">{{row.last_month_debt}}</td>

      </tr>

{% for item in data_activitybs %}
{% if item.Activity == row.Activity %}

<tr id="row27-{{ forloop.counter }}" class="sub d-none nonliabilities-activity-row {{row.Activity}}-section">
  <td class="firstcolumn">
  </td>
  <td>{{item.obj}}</td>
  <td class="space-before">{{item.obj}} - {{item.Description2}}</td>
  <td class="right-align-td">{% if ascender == "False" or school_bs == 'True' %}{{ item.activity_fye }}{% endif %}</td>
  {% if September == "True" %}
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
  {% else %}
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="07">{{item.total_bal7}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="08">{{item.total_bal8}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="09">{{item.total_bal9}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="10">{{item.total_bal10}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="11">{{item.total_bal11}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="12">{{item.total_bal12}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="01">{{item.total_bal1}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="02">{{item.total_bal2}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="03">{{item.total_bal3}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="04">{{item.total_bal4}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="05">{{item.total_bal5}}</td>
  <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ item.obj }}"  data-yr="06">{{item.total_bal6}}</td>
  {% endif %}
  <td class="right-align-td">{{item.fytd}} </td>
  <td class="right-align-td">{{item.last_month_bal}}</td>
</tr>



  {% endif %}
{% endfor %}

{% endif %}
{% endfor %}

<tr id="ttl-row" >
  <td class="firstcolumn"></td>
   <td></td>
   <td class="space-before-total"><strong>Total Noncurrent Liabilities</strong></td>
   <td id="current-liabilities-total-3" class="right-align-td top-border">{{totals_bs.total_noncurrent_liabilities_fye}}</td>
   {% if September == "True" %}
   <td id="current-liabilities-total-4" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.09}}</td>
   <td id="current-liabilities-total-5" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.10}}</td>
   <td id="current-liabilities-total-6" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.11}}</td>
   <td id="current-liabilities-total-7" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.12}}</td>
   <td id="current-liabilities-total-8" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.01}}</td>
   <td id="current-liabilities-total-9" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.02}}</td>
   <td id="current-liabilities-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.03}}</td>
   <td id="current-liabilities-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.04}}</td>
   <td id="current-liabilities-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.05}}</td>
   <td id="current-liabilities-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.06}}</td>
   <td id="current-liabilities-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.07}}</td>
   <td id="current-liabilities-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.08}}</td>
   {% else %}
   <td id="current-liabilities-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.07}}</td>
   <td id="current-liabilities-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.08}}</td>
   <td id="current-liabilities-total-4" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.09}}</td>
   <td id="current-liabilities-total-5" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.10}}</td>
   <td id="current-liabilities-total-6" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.11}}</td>
   <td id="current-liabilities-total-7" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.12}}</td>
   <td id="current-liabilities-total-8" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.01}}</td>
   <td id="current-liabilities-total-9" class="collapsed right-align-td top-border"  >{{totals_bs.total_noncurrent_liabilities.02}}</td>
   <td id="current-liabilities-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.03}}</td>
   <td id="current-liabilities-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.04}}</td>
   <td id="current-liabilities-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.05}}</td>
   <td id="current-liabilities-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_noncurrent_liabilities.06}}</td>
   {% endif %}
   <td id="current-liabilities-total-16" class="right-align-td top-border">{{totals_bs.total_noncurrent_liabilities_fytd}}</td>
   <td id="current-liabilities-total-17" class="right-align-td top-border">{{totals_bs.last_month_total_noncurrent_liabilities}}</td>
   
</tr>

    
    <tr id="ttl-row" class="ttl-lr-row">
        <td class="firstcolumn"></td>
        <td></td>
        <td>Long Term Debt</td>
        <script>
          for (var i = 3; i <= 17; i++) {
            if (i >= 4 && i <= 15) {
              document.write(`<td class="collapsed" ></td>`);
            } else {
              document.write(`<td  ></td>`);
            }
          }
        </script>
    </tr>

    

      {% for row in data_activitybs %}
      {% if row.Activity == 'LTD' %}
      
      <tr id="row17-{{ forloop.counter }}" class="liabilities-activity-row ltd-section">
        <td class="firstcolumn">
        
        </td>
        <td>{{row.obj}}</td>
        <td class="space-before">{{row.obj}} - {{row.Description2}}</td>
        <td class="right-align-td">{% if ascender == "False" or school_bs == 'True' %}{{ row.activity_fye }}{% endif %}</td>
        {% if September == "True" %}
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="09">{{row.total_bal9}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="10">{{row.total_bal10}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="11">{{row.total_bal11}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="12">{{row.total_bal12}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="01">{{row.total_bal1}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="02">{{row.total_bal2}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="03">{{row.total_bal3}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="04">{{row.total_bal4}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="05">{{row.total_bal5}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="06">{{row.total_bal6}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="07">{{row.total_bal7}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="08">{{row.total_bal8}}</td>
        {% else %}
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="07">{{row.total_bal7}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="08">{{row.total_bal8}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="09">{{row.total_bal9}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="10">{{row.total_bal10}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="11">{{row.total_bal11}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="12">{{row.total_bal12}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="01">{{row.total_bal1}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="02">{{row.total_bal2}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="03">{{row.total_bal3}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="04">{{row.total_bal4}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="05">{{row.total_bal5}}</td>
        <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link" data-obj="{{ row.obj }}"  data-yr="06">{{row.total_bal6}}</td>
        {% endif %}
        <td class="right-align-td">{{row.fytd}}</td>
        <td class="right-align-td">{{row.last_month_bal}}</td>
      </tr>
      
      {% endif %}
      {% endfor %}

      {% for row in data_balancesheet %}
      {% if row.school == school %}
   
        {% if row.Category == 'Debt' %}
        {% if row.Subcategory == 'Long Term Debt' %}
        {% if row.Activity == 'LTD' %}
            
            <tr class="total-liabilities-row">
              <td class="firstcolumn">
                <a
                id="row17"
                class="expand-button"
                onclick="oldshowHideSubs(event); "
                >
              <i id="row17-icon" class="fa-solid fa-chevron-down" style="color: #756c70;"></i>
              </td>
              <td>
                <input type="hidden"  name="updateID[]" value="{{row.BS_id}}" >
                <input type="hidden"  name="updatefye[]" value="{{row.FYE}}" id="hidden-fye-{{row.BS_id}}">
              </td>
              <td class="space-before">{{row.Description}}</td>
              <td id="value-cell-{{ forloop.counter }}" data-row-id="{{row.BS_id}}" contenteditable="false" class="right-align-td">
    
                <div >{% if ascender == "False" or school_bs == 'True'  %}{{row.total_fye}}{%else%}{{row.FYE}}{%endif%}</div>
              </td>
              {% if September == "True" %}
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="09">{{row.debt_9}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="10">{{row.debt_10}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="11">{{row.debt_11}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="12">{{row.debt_12}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="01">{{row.debt_1}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="02">{{row.debt_2}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="03">{{row.debt_3}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="04">{{row.debt_4}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="05">{{row.debt_5}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="06">{{row.debt_6}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="07">{{row.debt_7}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="08">{{row.debt_8}}</a></td>
              {% else %}
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="07">{{row.debt_7}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="08">{{row.debt_8}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="09">{{row.debt_9}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="10">{{row.debt_10}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="11">{{row.debt_11}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="12">{{row.debt_12}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="01">{{row.debt_1}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="02">{{row.debt_2}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="03">{{row.debt_3}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="04">{{row.debt_4}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="05">{{row.debt_5}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link ltd-total" data-yr="06">{{row.debt_6}}</a></td>

              {% endif %}
              <td class="right-align-td">{{row.debt_fytd}}</td>
              <td class="right-align-td">{{row.last_month_debt}}</td>
            </tr>
            {% endif %}   
     
            {% endif %} 
            {% endif %}  
        {% endif %}
      {% endfor %}
        
      <tr id="ttl-row" class="ttl-lr-row">
        <td class="firstcolumn"></td>
        <td></td>
        <td ><strong>Total Liabilities</strong></td>
        <td id="total-liabilities-total-3" class="right-align-td">{{totals_bs.total_liabilities_fye}}</td>
        {% if September == "True" %}
        <td id="total-liabilities-total-4" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.09}}</td>
        <td id="total-liabilities-total-5" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.10}}</td>
        <td id="total-liabilities-total-6" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.11}}</td>
        <td id="total-liabilities-total-7" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.12}}</td>
        <td id="total-liabilities-total-8" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.01}}</td>
        <td id="total-liabilities-total-9" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.02}}</td>
        <td id="total-liabilities-total-10" class="collapsed right-align-td" >{{totals_bs.total_liabilities.03}}</td>
        <td id="total-liabilities-total-11" class="collapsed right-align-td" >{{totals_bs.total_liabilities.04}}</td>
        <td id="total-liabilities-total-12" class="collapsed right-align-td" >{{totals_bs.total_liabilities.05}}</td>
        <td id="total-liabilities-total-13" class="collapsed right-align-td" >{{totals_bs.total_liabilities.06}}</td>
        <td id="total-liabilities-total-14" class="collapsed right-align-td" >{{totals_bs.total_liabilities.07}}</td>
        <td id="total-liabilities-total-15" class="collapsed right-align-td" >{{totals_bs.total_liabilities.08}}</td>

        {% else %}
        <td id="total-liabilities-total-14" class="collapsed right-align-td" >{{totals_bs.total_liabilities.07}}</td>
        <td id="total-liabilities-total-15" class="collapsed right-align-td" >{{totals_bs.total_liabilities.08}}</td>
        <td id="total-liabilities-total-4" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.09}}</td>
        <td id="total-liabilities-total-5" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.10}}</td>
        <td id="total-liabilities-total-6" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.11}}</td>
        <td id="total-liabilities-total-7" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.12}}</td>
        <td id="total-liabilities-total-8" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.01}}</td>
        <td id="total-liabilities-total-9" class="collapsed right-align-td"  >{{totals_bs.total_liabilities.02}}</td>
        <td id="total-liabilities-total-10" class="collapsed right-align-td" >{{totals_bs.total_liabilities.03}}</td>
        <td id="total-liabilities-total-11" class="collapsed right-align-td" >{{totals_bs.total_liabilities.04}}</td>
        <td id="total-liabilities-total-12" class="collapsed right-align-td" >{{totals_bs.total_liabilities.05}}</td>
        <td id="total-liabilities-total-13" class="collapsed right-align-td" >{{totals_bs.total_liabilities.06}}</td>

        {% endif %}
        <td id="total-liabilities-total-16" class="right-align-td">{{totals_bs.total_liabilities_fytd}}</td>
        <td id="total-liabilities-total-17" class="right-align-td">{{totals_bs.last_month_total_liabilities}}</td>


       
      </tr>

    {% for row in data_balancesheet %}
    {% if row.school == school %}
   
        {% if row.Category == 'Net Assets' %}
        {% if row.Activity == 'Equity' %}
            <tr class="net-assets-row">
   
              <td class="firstcolumn">
              </td>
              <td>
                <input type="hidden"  name="updateID[]" value="{{row.BS_id}}" >
                <input type="hidden"  name="updatefye[]" value="{{row.FYE}}" id="hidden-fye-{{row.BS_id}}">
              </td>
              <td><strong>Net Assets<strong></td>
                <td id="value-cell-{{ forloop.counter }}" data-row-id="{{row.BS_id}}" contenteditable="false" class="right-align-td">
            
                  <div >{% if ascender == "False" or school_bs == 'True' %}{{row.total_fye}}{%else%}{{row.FYE}}{%endif%}</div>
                </td>
                {% if September == "True" %}
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="09">{{row.net_assets9}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="10">{{row.net_assets10}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="11">{{row.net_assets11}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="12">{{row.net_assets12}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="01">{{row.net_assets1}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="02">{{row.net_assets2}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="03">{{row.net_assets3}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="04">{{row.net_assets4}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="05">{{row.net_assets5}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="06">{{row.net_assets6}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="07">{{row.net_assets7}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="08">{{row.net_assets8}}</a></td>
              {% else %}
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="07">{{row.net_assets7}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="08">{{row.net_assets8}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="09">{{row.net_assets9}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="10">{{row.net_assets10}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="11">{{row.net_assets11}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="12">{{row.net_assets12}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="01">{{row.net_assets1}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="02">{{row.net_assets2}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="03">{{row.net_assets3}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="04">{{row.net_assets4}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="05">{{row.net_assets5}}</a></td>
              <td class="collapsed right-align-td"><a href="#" class="viewgl_activitybs-link equity-total" data-yr="06">{{row.net_assets6}}</a></td>
              {% endif %}

              <td class="right-align-td">{{totals_bs.total_net_assets_fytd}}</td>
              <td class="right-align-td">{{row.last_month_net_assets}}</td>
            </tr>
            {% endif %}
            {% endif %}
            {% endif %}  
   
          {% endfor %}

        <tr id="liabilitiesandnet-total-row" class="ttl-lr-row">
          <td class="firstcolumn"></td>
          <td></td>
          <td class="space-before-total"><strong>Total Liabilities and Net Assets</strong></td>
          <td id="liabilitiesandnet-total-3" class="right-align-td top-border">{{totals_bs.total_LNA_fye}}</td>
          {% if September == "True" %}
          <td id="liabilitiesandnet-total-4" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.09}}</td>
          <td id="liabilitiesandnet-total-5" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.10}}</td>
          <td id="liabilitiesandnet-total-6" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.11}}</td>
          <td id="liabilitiesandnet-total-7" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.12}}</td>
          <td id="liabilitiesandnet-total-8" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.01}}</td>
          <td id="liabilitiesandnet-total-9" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.02}}</td>
          <td id="liabilitiesandnet-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.03}}</td>
          <td id="liabilitiesandnet-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.04}}</td>
          <td id="liabilitiesandnet-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.05}}</td>
          <td id="liabilitiesandnet-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.06}}</td>
          <td id="liabilitiesandnet-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.07}}</td>
          <td id="liabilitiesandnet-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.08}}</td>

          {% else %}
          <td id="liabilitiesandnet-total-14" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.07}}</td>
          <td id="liabilitiesandnet-total-15" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.08}}</td>
          <td id="liabilitiesandnet-total-4" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.09}}</td>
          <td id="liabilitiesandnet-total-5" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.10}}</td>
          <td id="liabilitiesandnet-total-6" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.11}}</td>
          <td id="liabilitiesandnet-total-7" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.12}}</td>
          <td id="liabilitiesandnet-total-8" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.01}}</td>
          <td id="liabilitiesandnet-total-9" class="collapsed right-align-td top-border"  >{{totals_bs.total_LNA.02}}</td>
          <td id="liabilitiesandnet-total-10" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.03}}</td>
          <td id="liabilitiesandnet-total-11" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.04}}</td>
          <td id="liabilitiesandnet-total-12" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.05}}</td>
          <td id="liabilitiesandnet-total-13" class="collapsed right-align-td top-border" >{{totals_bs.total_LNA.06}}</td>
          {% endif %}
          <td id="liabilitiesandnet-total-16" class="right-align-td top-border">{{totals_bs.total_LNA_fytd}}</td>
          <td id="liabilitiesandnet-total-17" class="right-align-td top-border">{{totals_bs.last_month_total_LNA}}</td>         
      </tr>

   
        

      <!-- START OF MANARA AND PREPSCHOOL-->
      {% comment %}   {% endcomment %}
     
</tbody>
</table>
</div>
</form>
</div>

<script>

</script>

<script>

  var last_month = "{{last_month}}";

  document.addEventListener("DOMContentLoaded", function (){
    var missingColumns = []; 
    var today = new Date();
    var currentMonthIndex = today.getMonth();


    var monthNames = [
      "September", "October", "November", "December",
      "January", "February", "March", "April",
      "May", "June", "July", "August"
    ];

    
    for (var i = 6 + currentMonthIndex; i <= 17; i++) { 
        var columnCells = document.querySelectorAll(".balancesheet-activity-row td:nth-child(" + i + "), .current-assets-row td:nth-child(" + i + ")");
  
        var allEmpty = true;
  
        columnCells.forEach(function(cell) {
            if (cell.innerText.trim()) {
                allEmpty = false;
            }
        });
  
        if (allEmpty) {
          missingColumns.push(monthNames[i-5 ]);
          
        }
    }
  
    if (missingColumns.length > 0) {
        var missingColumnsText = missingColumns.join(", ");
        var missingDataMessage = "The following columns have no data: " + missingColumnsText;
        

    }
  });
</script>


<div id="settings-modal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Settings</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div style="max-height:500px; overflow-y:auto;">
        <table id="settings-table" class="table">
          <thead>
            <tr>
              <th scope="col">Activity Type</th>
              <th scope="col">Object</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <form action="">
              {% csrf_token %}

              {% for missing_items in missing_activities %}
              <tr class="no-act">
                <td>
                  <select name="missing-activity" id="">
                    <option value=""></option>
                    {% for option in activity_options %}
                    <option value="{{ option }}"> {{option}} </option>
                    {% endfor %}
                  </select>
                </td>
                <td>{{ missing_items.obj }}</td>
                <td contenteditable="true">{{ missing_items.Description }}</td>
              </tr>
              {% endfor %}

              {% for item in not_missing %}
              <tr class="no-act">
                <td>
                  <select name="missing-activity" id="">
                    <option value="{{ item.Activity }}" selected>{{ item.Activity }}</option>
                    {% for option in activity_options %}
                    <option value="{{ option }}"> {{ option }} </option>
                    {% endfor %}
                  </select>
                </td>
                <td>{{ item.obj }}</td>
                <td contenteditable="true">{{ item.Description }}</td>
              </tr>
              {% endfor %}

            </form>
            
          </tbody>
        </table>
        </div>
      </div>
      <div class="modal-footer">
        <button id="save-settings-btn" type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}


{% block javascript %}
<script>
  var school = "{{ school }}"; 
  var year = "{{FY_year_1}}"
  var ascender = "{{ascender}}";
  var url = 'acc';
  var sept = "{{September}}";
  console.log(ascender);
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("showCurrentMonth").addEventListener("click", function () {

      showcurrentMonth();


    });

    document.getElementById("hideCurrentMonth").addEventListener("click", function () {

      hidecurrentMonth();


    });

  });


  function oldshowHideSubs(event){
    const section = event.currentTarget.closest('tr')
    
    //let prevElem = section.previousElementSibling;
    let nextElem = section.nextElementSibling;
    //section.classList.toggle('topborder')
    
    while (nextElem.classList.contains('sub')) {
    
      nextElem.classList.toggle('d-none')
      nextElem = nextElem.nextElementSibling;
    }
    /*while (prevElem.classList.contains('sub')) {
    
      prevElem.classList.toggle('d-none')
      prevElem = prevElem.previousElementSibling;
    }*/
  } // end of showHideSubs

</script>
<script src="{% static 'js/bs2.js' %}"></script>
<script src="{% static 'js/bs.js' %}"></script>

<script src="{% static 'js/excel.js' %}"></script>
<script src="{% static 'js/bs-settings.js' %}"></script>


<script src="{% static 'js/bsHideCols.js' %}"></script>  

<script src="{% static 'js/pdf.js' %}"></script>
{% endblock %}

