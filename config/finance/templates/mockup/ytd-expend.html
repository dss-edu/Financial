{% block libraries %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
{% endblock %}
{% load static %} 
<style>
  .active {
    background-color: #FFFFFF;
    text-decoration: none; 
    color: #3498db;
    border-radius: 0.25rem;
  }
  .not-active {
    text-decoration: none; 
    color: gray; /* Gray out the link */
    pointer-events: none; /* Prevents clicking */
    cursor: default; /* Resets the cursor */
  }
  #new-ui{
    font-family: 'Lato', sans-serif;
    font-weight: bold;
  }
  #new-ui span {
    color: #1b4f72;
    font-weight: 900;
  }

  .net-section-head div:nth-child(1), 
  .net-section div:nth-child(1) {
    color: gray;
    font-size: .75em;
  }

  .net-section-head div:nth-child(2){
    
    font-size: 1.25em;
  }
  .net-section div:nth-child(2){
    color: 	#4b4b4b;
    font-size: 1em;
  }
  .net-section div:nth-child(3){
    color: 	#ebae67;
    font-size: .75em;
  }
  #quarter-tabs {
    font-size: .75em;
  }
  #quarter-tabs > a:hover {
    background-color: #FFFFFF;
  }

  #table-main {
    border-collapse: collapse;
    color: #1b4f72;
  }
  #table-main thead{
    text-align: center;
  }
  #table-main th > div {
    padding-top: .75rem;
    padding-bottom: .75rem;
    /* padding: 1rem 1rem; */
  }
  #table-main tbody td{
    color: #1b4f72 ; 
  }
  #table-main tbody td:not(:first-child){
    text-align: end;
  }
  #table-main tbody td {
      white-space: nowrap;  /* Prevent text wrapping */
      overflow: hidden;     /* Hide overflow */
      text-overflow: ellipsis; /* Add an ellipsis for overflowed text */
      /* You might want to adjust the width as needed */
  }

  /* .super-dom {
    font-size: 20px;
  } */
  .super-dom > :first-child{
    padding-left: 40px;
    cursor: pointer;
  }
  .dom {
    font-size: .85em;
    /* padding-left: 10px; */
  }
  .dom > :first-child{
    padding-left: 80px;
    cursor: pointer;
  }
  .sub > :first-child {
    padding-left: 80px;
  }
  .sub td {
    height: 0 !important;
    padding-top: 0;
    padding-bottom: 0;
    /* padding: 0 2rem; */
  }
  .sub {
    height: 0 !important;
    font-weight: 400;
    font-size: .85em;
  }

  .smallfont td{
    height: 0 !important;
    font-weight: 400;
  
    height: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
   
   
  }

  .smallfont {
    border-top: 0 !important;
  }

  .sub-active {
    display: block;
  }
  .upswing {
    color: #29ab87 !important;
  }
  .downswing {
    color: #cc0000;
  }
  .modal-table {
    border-collapse: collapse;
  }

  .partial-border-right {
      position: relative;
  }

  .partial-border-right::after {
      content: '';
      position: absolute;
      right: 0;
      top: 25%; /* Adjust this to vertically center the border */
      bottom: 25%; /* Same as above */
      border-right: 2px solid #e4e4e4; /* Adjust border color and width as needed */
      width: 0;
  }

  .bordertopbot{
    border-top: 3px solid black!important;
    border-bottom: 3px solid black!important;

  }
  .blue{
    color: #1b4f72;
  }
  .form-switch .form-check-input:checked {
    background-position: right center;
    background-color: #1b4f72;
   

  }
  .form-check-label{
    font-size: 12px;
  }

  .title-dom > :first-child{
    cursor: pointer;
  }

  .title-dom > td{
    padding: 10px 25px!important;
    border-top: 2px solid rgb(228, 228, 228);
  }
</style>


<div id="new-ui">
  <div id="new-table-box" class="rounded shadow-lg p-3 h-100">
    <div class="d-flex flex-row justify-content-between align-items-center p-3 mb-3">
      <div id="section-title">
        <span>
        FY{{months.FY_year_1}}-{{months.FY_year_2}} 
        </span>
        <br>
        <span>
            YTD GRANT BALANCE/EXPENDITURES
        <span>
        {% comment %} <br>
        <span>
        as of {{months.last_month}}
        </span> {% endcomment %}
      </div>
      <div>
        <div class="d-flex justify-content-between rounded py-2 px-1">

        <div class="form-check form-switch"  style="margin-left:15px;">

          <input class="form-check-input" type="checkbox" role="switch" id="showCurr" >
          <label class="form-check-label" for="showCurr">Show Current Month</label>
        </div>
        
        <div class="form-check form-switch"  style="margin-left:15px;">

          <input class="form-check-input" type="checkbox" role="switch" id="toggleRow" checked>
          <label class="form-check-label" for="toggleRow">Expand Rows</label>
        </div>
        <div class=" align-sef-end" >
          YE: {% if September == "True" %} August {% else %} June {% endif %}


        </div>
      </div>
        <div id="quarter-tabs" class="d-inline rounded py-2 px-1" style="background-color: #f5f6f7;">
          <a class="p-1" href="">Show all</a>
          <a class="p-1 not-active" href="">1st Quarter</a>
          <a class="p-1 not-active" href="">2nd Quarter</a>
          <a class="p-1 not-active" href="">3rd Quarter</a>
          <a class="p-1 not-active"  href="">4th Quarter</a>
        </div>
      </div>
    </div>
    
    <div class="">
      <table id="table-main">
        <thead>
          <tr class="rounded shadow headerNew">
            <th>
              <div class="net-section-head">
                <div class="net-title">FUND GRANT TITLE</div>
                <div class="quarter-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th>
              <div class="net-section">
                <div class="">Budget</div>
                <div class=""> </div>
                <div class=""></div>
              </div>
            </th>
            {% comment %} <th>
              <div class="net-section">
                <div class=""> {{months.format_ytd_budget}}% YTD Budget </div>
                <div class=""> {{totals.ytd_budget_net_income}} </div>
                <div class=""></div>
              </div>
            </th> {% endcomment %}

            <!--      Months       -->
            {% if September == "True" %}
            <th class="month">
              <div class="net-section">
                <div class="">September</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">October</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">November</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">December</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">January</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">February</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">March</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">April</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">May</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">June</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">July</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">August</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>

            {% else %}
            <th class="month">
              <div class="net-section">
                <div class="">July</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">August</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">September</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">October</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">November</div>
                <div class="monthly-net-total">  </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">December</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">January</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">February</div>
                <div class="monthly-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">March</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">April</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">May</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>
            <th class="month">
              <div class="net-section">
                <div class="">June</div>
                <div class="monthly-net-total"></div>
                <div class=""></div>
              </div>
            </th>

            {% endif %}
            <!--      End Months       -->

            <th>
              <div class="net-section">
                <div class="">YTD EXPENDITURES</div>
                <div id="all-net-total"> </div>
                <div class=""></div>
              </div>
            </th>
            <th>
              <div class="net-section">
                <div class="">REMAINING BALANCE</div>
                <div class=""> </div>
                <div class=""></div>
              </div>
            </th>
            <th>
              <div class="net-section">
                <div class="">PROJECTED BALANCE</div>
                <div class=""> </div>
                <div class=""></div>
              </div>
            </th>

          </tr>
        </thead>
        <tbody>

          <!-- START OF REVENUE -->

            
         
          {% for fund, data in expend_fund.items %}
          {% comment %} <tr class="title-dom">
            <td>{{ fund }}  </td>
            <td> </td>

            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  </td>
            <td>  

            <td></td>
            <td></td>
            <td> </td>
          </tr> {% endcomment %}
          
          {% comment %} <tr class="super-dom">
            <td>Total  Revenue </td>
            <td> {{ data.total_budget_revenue }}</td>
            {% if September == "True" %}
            <td>  {{  data.total_revenue_9  }} </a></td>
            <td>  {{  data.total_revenue_10 }} </a></td>
            <td>  {{  data.total_revenue_11 }} </a></td>
            <td>  {{  data.total_revenue_12 }} </a></td>
            <td>  {{  data.total_revenue_1  }} </a></td>
            <td>  {{  data.total_revenue_2  }} </a></td>
            <td>  {{  data.total_revenue_3  }} </a></td>
            <td>  {{  data.total_revenue_4  }} </a></td>
            <td>  {{  data.total_revenue_5  }} </a></td>
            <td>  {{  data.total_revenue_6  }} </a></td>
            <td>  {{  data.total_revenue_7  }} </a></td>
            <td>  {{  data.total_revenue_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_revenue_7  }} </a></td>
            <td>  {{  data.total_revenue_8  }} </a></td>
            <td>  {{  data.total_revenue_9  }} </a></td>
            <td>  {{  data.total_revenue_10 }} </a></td>
            <td>  {{  data.total_revenue_11 }} </a></td>
            <td>  {{  data.total_revenue_12 }} </a></td>
            <td>  {{  data.total_revenue_1  }} </a></td>
            <td>  {{  data.total_revenue_2  }} </a></td>
            <td>  {{  data.total_revenue_3  }} </a></td>
            <td>  {{  data.total_revenue_4  }} </a></td>
            <td>  {{  data.total_revenue_5  }} </a></td>
            <td>  {{  data.total_revenue_6  }} </a></td>
            {% endif %}
            <td>{{ data.total_revenue_ytd}} </td>
            <td> {{ data.total_PB_revenue }} </td>
            <td> </td>
          </tr> {% endcomment %}
          {% for row in ytd_expenditure_data_revenue %}
          {% if row.category == 'Local Revenue' %}
          {% if row.fund == fund %}
         
          <tr class="dom d-none">

            <td>{{ row.obj }} - {{ row.description }} </td>
            <td> {{row.total_budget}} </td>
    

            {% if September == "True" %}
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="09"> {{ row.total_real9 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="10"> {{ row.total_real10 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="11"> {{ row.total_real11 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="12"> {{ row.total_real12 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="01"> {{ row.total_real1 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="02"> {{ row.total_real2 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="03"> {{ row.total_real3 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="04"> {{ row.total_real4 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="05"> {{ row.total_real5 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="06"> {{ row.total_real6 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="07"> {{ row.total_real7 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="08"> {{ row.total_real8 }} </a></td>
            {% else %}
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="07"> {{ row.total_real7 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="08"> {{ row.total_real8 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="09"> {{ row.total_real9 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="10"> {{ row.total_real10 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="11"> {{ row.total_real11 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="12"> {{ row.total_real12 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="01"> {{ row.total_real1 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="02"> {{ row.total_real2 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="03"> {{ row.total_real3 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="04"> {{ row.total_real4 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="05"> {{ row.total_real5 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="06"> {{ row.total_real6 }} </a></td>
            {% endif %}

            <td><a href="#" class="viewgl-link-ytd" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" > {{ row.ytd_total }} </a></td>
            <td></td>

          </tr>
          {% endif %}
          {% endif %}
          {% endfor %}
          {% comment %} <tr class="dom">
            <td> 5700 - Local Revenue </td>
            <td> {{ data.total_budget_57 }}</td>
            {% if September == "True" %}
            <td>  {{  data.total_revenue_5700_9  }} </a></td>
            <td>  {{  data.total_revenue_5700_10 }} </a></td>
            <td>  {{  data.total_revenue_5700_11 }} </a></td>
            <td>  {{  data.total_revenue_5700_12 }} </a></td>
            <td>  {{  data.total_revenue_5700_1  }} </a></td>
            <td>  {{  data.total_revenue_5700_2  }} </a></td>
            <td>  {{  data.total_revenue_5700_3  }} </a></td>
            <td>  {{  data.total_revenue_5700_4  }} </a></td>
            <td>  {{  data.total_revenue_5700_5  }} </a></td>
            <td>  {{  data.total_revenue_5700_6  }} </a></td>
            <td>  {{  data.total_revenue_5700_7  }} </a></td>
            <td>  {{  data.total_revenue_5700_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_revenue_5700_7  }} </a></td>
            <td>  {{  data.total_revenue_5700_8  }} </a></td>
            <td>  {{  data.total_revenue_5700_9  }} </a></td>
            <td>  {{  data.total_revenue_5700_10 }} </a></td>
            <td>  {{  data.total_revenue_5700_11 }} </a></td>
            <td>  {{  data.total_revenue_5700_12 }} </a></td>
            <td>  {{  data.total_revenue_5700_1  }} </a></td>
            <td>  {{  data.total_revenue_5700_2  }} </a></td>
            <td>  {{  data.total_revenue_5700_3  }} </a></td>
            <td>  {{  data.total_revenue_5700_4  }} </a></td>
            <td>  {{  data.total_revenue_5700_5  }} </a></td>
            <td>  {{  data.total_revenue_5700_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_revenue_5700_ytd}}</td>
            <td>  {{ data.total_PB_5700 }} </td>
            <td> </td>
          </tr> {% endcomment %}
       
          {% for row in ytd_expenditure_data_revenue %}
          {% if row.category == 'State Program Revenue' %}
          {% if row.fund == fund %}
         
          <tr class="dom d-none">

            <td>{{ row.obj }} - {{ row.description }} </td>
            <td> {{row.total_budget}} </td>
    

            {% if September == "True" %}
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="09"> {{ row.total_real9 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="10"> {{ row.total_real10 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="11"> {{ row.total_real11 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="12"> {{ row.total_real12 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="01"> {{ row.total_real1 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="02"> {{ row.total_real2 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="03"> {{ row.total_real3 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="04"> {{ row.total_real4 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="05"> {{ row.total_real5 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="06"> {{ row.total_real6 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="07"> {{ row.total_real7 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="08"> {{ row.total_real8 }} </a></td>
            {% else %}
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="07"> {{ row.total_real7 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="08"> {{ row.total_real8 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="09"> {{ row.total_real9 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="10"> {{ row.total_real10 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="11"> {{ row.total_real11 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fun`d="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="12"> {{ row.total_real12 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="01"> {{ row.total_real1 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="02"> {{ row.total_real2 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="03"> {{ row.total_real3 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="04"> {{ row.total_real4 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="05"> {{ row.total_real5 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="06"> {{ row.total_real6 }} </a></td>
            {% endif %}

            <td><a href="#" class="viewgl-link-ytd" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" > {{ row.ytd_total }} </a></td>
            <td></td>

          </tr>
          {% endif %}
          {% endif %}
          {% endfor %}
      
          {% comment %} <tr class="dom">
            <td> 5800 - State Program Revenue </td>
            <td> {{ data.total_budget_58 }} </td>
            {% if September == "True" %}
            <td>  {{  data.total_revenue_5800_9  }} </a></td>
            <td>  {{  data.total_revenue_5800_10 }} </a></td>
            <td>  {{  data.total_revenue_5800_11 }} </a></td>
            <td>  {{  data.total_revenue_5800_12 }} </a></td>
            <td>  {{  data.total_revenue_5800_1  }} </a></td>
            <td>  {{  data.total_revenue_5800_2  }} </a></td>
            <td>  {{  data.total_revenue_5800_3  }} </a></td>
            <td>  {{  data.total_revenue_5800_4  }} </a></td>
            <td>  {{  data.total_revenue_5800_5  }} </a></td>
            <td>  {{  data.total_revenue_5800_6  }} </a></td>
            <td>  {{  data.total_revenue_5800_7  }} </a></td>
            <td>  {{  data.total_revenue_5800_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_revenue_5800_7  }} </a></td>
            <td>  {{  data.total_revenue_5800_8  }} </a></td>
            <td>  {{  data.total_revenue_5800_9  }} </a></td>
            <td>  {{  data.total_revenue_5800_10 }} </a></td>
            <td>  {{  data.total_revenue_5800_11 }} </a></td>
            <td>  {{  data.total_revenue_5800_12 }} </a></td>
            <td>  {{  data.total_revenue_5800_1  }} </a></td>
            <td>  {{  data.total_revenue_5800_2  }} </a></td>
            <td>  {{  data.total_revenue_5800_3  }} </a></td>
            <td>  {{  data.total_revenue_5800_4  }} </a></td>
            <td>  {{  data.total_revenue_5800_5  }} </a></td>
            <td>  {{  data.total_revenue_5800_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_revenue_5800_ytd}}</td>
            <td>  {{ data.total_PB_5800 }} </td>
            <td> </td>
          </tr> {% endcomment %}
          {% for row in ytd_expenditure_data_revenue %}
          {% if row.category == 'Federal Program Revenue' %}
          {% if row.fund == fund %}
         
          <tr class="dom d-none">

            <td>{{ row.obj }} - {{ row.description }} </td>
            <td> {{row.total_budget}} </td>
    

            {% if September == "True" %}
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="09"> {{ row.total_real9 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="10"> {{ row.total_real10 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="11"> {{ row.total_real11 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="12"> {{ row.total_real12 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="01"> {{ row.total_real1 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="02"> {{ row.total_real2 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="03"> {{ row.total_real3 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="04"> {{ row.total_real4 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="05"> {{ row.total_real5 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="06"> {{ row.total_real6 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="07"> {{ row.total_real7 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="08"> {{ row.total_real8 }} </a></td>
            {% else %}
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="07"> {{ row.total_real7 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="08"> {{ row.total_real8 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="09"> {{ row.total_real9 }}  </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="10"> {{ row.total_real10 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="11"> {{ row.total_real11 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="12"> {{ row.total_real12 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="01"> {{ row.total_real1 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="02"> {{ row.total_real2 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="03"> {{ row.total_real3 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="04"> {{ row.total_real4 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="05"> {{ row.total_real5 }} </a></td>
            <td><a class="viewgl-link" href="#" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" data-yr="06"> {{ row.total_real6 }} </a></td>
            {% endif %}

            <td><a href="#" class="viewgl-link-ytd" data-fund="{{ row.fund }}" data-obj="{{ row.obj }}" > {{ row.ytd_total }} </a></td>
            <td></td>

          </tr>
          {% endif %}
          {% endif %}
          {% endfor %}


          {% comment %} <tr class="dom">
            <td> 5900 - Federal Program Revenue</td>
            <td> {{ data.total_budget_59 }} </td>
            {% if September == "True" %}
            <td>  {{  data.total_revenue_5900_9  }} </a></td>
            <td>  {{  data.total_revenue_5900_10 }} </a></td>
            <td>  {{  data.total_revenue_5900_11 }} </a></td>
            <td>  {{  data.total_revenue_5900_12 }} </a></td>
            <td>  {{  data.total_revenue_5900_1  }} </a></td>
            <td>  {{  data.total_revenue_5900_2  }} </a></td>
            <td>  {{  data.total_revenue_5900_3  }} </a></td>
            <td>  {{  data.total_revenue_5900_4  }} </a></td>
            <td>  {{  data.total_revenue_5900_5  }} </a></td>
            <td>  {{  data.total_revenue_5900_6  }} </a></td>
            <td>  {{  data.total_revenue_5900_7  }} </a></td>
            <td>  {{  data.total_revenue_5900_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_revenue_5900_7  }} </a></td>
            <td>  {{  data.total_revenue_5900_8  }} </a></td>
            <td>  {{  data.total_revenue_5900_9  }} </a></td>
            <td>  {{  data.total_revenue_5900_10 }} </a></td>
            <td>  {{  data.total_revenue_5900_11 }} </a></td>
            <td>  {{  data.total_revenue_5900_12 }} </a></td>
            <td>  {{  data.total_revenue_5900_1  }} </a></td>
            <td>  {{  data.total_revenue_5900_2  }} </a></td>
            <td>  {{  data.total_revenue_5900_3  }} </a></td>
            <td>  {{  data.total_revenue_5900_4  }} </a></td>
            <td>  {{  data.total_revenue_5900_5  }} </a></td>
            <td>  {{  data.total_revenue_5900_6  }} </a></td>
            {% endif %}
            <td>{{ data.total_revenue_5900_ytd}} </td>
            <td>  {{ data.total_PB_5900 }} </td>
            <td> </td>
          </tr> {% endcomment %}
         
          



          {% comment %} <tr class="super-dom">
            <td>Total Expenses  </td>
            <td> {{ data.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  data.total_9  }} </a></td>
            <td>  {{  data.total_10 }} </a></td>
            <td>  {{  data.total_11 }} </a></td>
            <td>  {{  data.total_12 }} </a></td>
            <td>  {{  data.total_1  }} </a></td>
            <td>  {{  data.total_2  }} </a></td>
            <td>  {{  data.total_3  }} </a></td>
            <td>  {{  data.total_4  }} </a></td>
            <td>  {{  data.total_5  }} </a></td>
            <td>  {{  data.total_6  }} </a></td>
            <td>  {{  data.total_7  }} </a></td>
            <td>  {{  data.total_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_7  }} </a></td>
            <td>  {{  data.total_8  }} </a></td>
            <td>  {{  data.total_9  }} </a></td>
            <td>  {{  data.total_10 }} </a></td>
            <td>  {{  data.total_11 }} </a></td>
            <td>  {{  data.total_12 }} </a></td>
            <td>  {{  data.total_1  }} </a></td>
            <td>  {{  data.total_2  }} </a></td>
            <td>  {{  data.total_3  }} </a></td>
            <td>  {{  data.total_4  }} </a></td>
            <td>  {{  data.total_5  }} </a></td>
            <td>  {{  data.total_6  }} </a></td>
            {% endif %}
            <td>{{ data.total_ytd}} </td>
            <td> {{ data.total_PB }} </td>
            <td> </td>
          </tr> {% endcomment %}

          {% for item in unique_objcodes %}
          {% if item.Category == 'Payroll and Benefits' and fund == item.fund %}
          <tr class="dom d-none">
            <td> {{item.obj}}-{{item.Description}}</td>
            <td> {{ item.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            {% else %}
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            {% endif %}
            <td> {{  item.ytd_total  }}</td>
            <td> </td>
            <td> </td>
          </tr>
          {% endif %}
          {%endfor%}
          {% comment %} <tr class="dom">
            <td> 6100 - Payroll And Benefits </td>
            <td> {{ data.total_budget_61 }}</td>
            {% if September == "True" %}
            <td>  {{  data.total_expend_6100_9  }} </a></td>
            <td>  {{  data.total_expend_6100_10 }} </a></td>
            <td>  {{  data.total_expend_6100_11 }} </a></td>
            <td>  {{  data.total_expend_6100_12 }} </a></td>
            <td>  {{  data.total_expend_6100_1  }} </a></td>
            <td>  {{  data.total_expend_6100_2  }} </a></td>
            <td>  {{  data.total_expend_6100_3  }} </a></td>
            <td>  {{  data.total_expend_6100_4  }} </a></td>
            <td>  {{  data.total_expend_6100_5  }} </a></td>
            <td>  {{  data.total_expend_6100_6  }} </a></td>
            <td>  {{  data.total_expend_6100_7  }} </a></td>
            <td>  {{  data.total_expend_6100_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_expend_6100_7  }} </a></td>
            <td>  {{  data.total_expend_6100_8  }} </a></td>
            <td>  {{  data.total_expend_6100_9  }} </a></td>
            <td>  {{  data.total_expend_6100_10 }} </a></td>
            <td>  {{  data.total_expend_6100_11 }} </a></td>
            <td>  {{  data.total_expend_6100_12 }} </a></td>
            <td>  {{  data.total_expend_6100_1  }} </a></td>
            <td>  {{  data.total_expend_6100_2  }} </a></td>
            <td>  {{  data.total_expend_6100_3  }} </a></td>
            <td>  {{  data.total_expend_6100_4  }} </a></td>
            <td>  {{  data.total_expend_6100_5  }} </a></td>
            <td>  {{  data.total_expend_6100_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_expend_6100_ytd}}</td>
            <td>  {{ data.total_PB_6100 }} </td>
            <td> </td>
          </tr> {% endcomment %}

          {% for item in unique_objcodes %}
          {% if item.Category == 'Professional and Contract Services' and fund == item.fund %}
          <tr class="dom d-none">
            <td> {{item.obj}}-{{item.Description}}</td>
            <td> {{ item.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            {% else %}
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            {% endif %}
            <td> {{  item.ytd_total  }}</td>
            <td> </td>
            <td> </td>
          </tr>
          {% endif %}
          {%endfor%}
          {% comment %} <tr class="dom">
            <td> 6200 - Professional and Contract Services </td>
            <td> {{ data.total_budget_62 }} </td>
            {% if September == "True" %}
            <td>  {{  data.total_expend_6200_9  }} </a></td>
            <td>  {{  data.total_expend_6200_10 }} </a></td>
            <td>  {{  data.total_expend_6200_11 }} </a></td>
            <td>  {{  data.total_expend_6200_12 }} </a></td>
            <td>  {{  data.total_expend_6200_1  }} </a></td>
            <td>  {{  data.total_expend_6200_2  }} </a></td>
            <td>  {{  data.total_expend_6200_3  }} </a></td>
            <td>  {{  data.total_expend_6200_4  }} </a></td>
            <td>  {{  data.total_expend_6200_5  }} </a></td>
            <td>  {{  data.total_expend_6200_6  }} </a></td>
            <td>  {{  data.total_expend_6200_7  }} </a></td>
            <td>  {{  data.total_expend_6200_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_expend_6200_7  }} </a></td>
            <td>  {{  data.total_expend_6200_8  }} </a></td>
            <td>  {{  data.total_expend_6200_9  }} </a></td>
            <td>  {{  data.total_expend_6200_10 }} </a></td>
            <td>  {{  data.total_expend_6200_11 }} </a></td>
            <td>  {{  data.total_expend_6200_12 }} </a></td>
            <td>  {{  data.total_expend_6200_1  }} </a></td>
            <td>  {{  data.total_expend_6200_2  }} </a></td>
            <td>  {{  data.total_expend_6200_3  }} </a></td>
            <td>  {{  data.total_expend_6200_4  }} </a></td>
            <td>  {{  data.total_expend_6200_5  }} </a></td>
            <td>  {{  data.total_expend_6200_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_expend_6200_ytd}}</td>
            <td>  {{ data.total_PB_6200 }} </td>
            <td> </td>
          </tr> {% endcomment %}

          {% for item in unique_objcodes %}
          {% if item.Category == 'Materials and Supplies' and fund == item.fund %}
          <tr class="dom d-none">
            <td> {{item.obj}}-{{item.Description}}</td>
            <td> {{ item.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            {% else %}
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            {% endif %}
            <td> {{  item.ytd_total  }}</td>
            <td> </td>
            <td> </td>
          </tr>
          {% endif %}
          {%endfor%}

          {% comment %} <tr class="dom">
            <td> 6300 - Materials and Supplies</td>
            <td> {{ data.total_budget_63 }} </td>
            {% if September == "True" %}
            <td>  {{  data.total_expend_6300_9  }} </a></td>
            <td>  {{  data.total_expend_6300_10 }} </a></td>
            <td>  {{  data.total_expend_6300_11 }} </a></td>
            <td>  {{  data.total_expend_6300_12 }} </a></td>
            <td>  {{  data.total_expend_6300_1  }} </a></td>
            <td>  {{  data.total_expend_6300_2  }} </a></td>
            <td>  {{  data.total_expend_6300_3  }} </a></td>
            <td>  {{  data.total_expend_6300_4  }} </a></td>
            <td>  {{  data.total_expend_6300_5  }} </a></td>
            <td>  {{  data.total_expend_6300_6  }} </a></td>
            <td>  {{  data.total_expend_6300_7  }} </a></td>
            <td>  {{  data.total_expend_6300_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_expend_6300_7  }} </a></td>
            <td>  {{  data.total_expend_6300_8  }} </a></td>
            <td>  {{  data.total_expend_6300_9  }} </a></td>
            <td>  {{  data.total_expend_6300_10 }} </a></td>
            <td>  {{  data.total_expend_6300_11 }} </a></td>
            <td>  {{  data.total_expend_6300_12 }} </a></td>
            <td>  {{  data.total_expend_6300_1  }} </a></td>
            <td>  {{  data.total_expend_6300_2  }} </a></td>
            <td>  {{  data.total_expend_6300_3  }} </a></td>
            <td>  {{  data.total_expend_6300_4  }} </a></td>
            <td>  {{  data.total_expend_6300_5  }} </a></td>
            <td>  {{  data.total_expend_6300_6  }} </a></td>
            {% endif %}
            <td>{{ data.total_expend_6300_ytd}} </td>
            <td>  {{ data.total_PB_6300 }} </td>
            <td> </td>
          </tr> {% endcomment %}
          {% for item in unique_objcodes %}
          {% if item.Category == 'Other Operating Costs' and fund == item.fund %}
          <tr class="dom d-none">
            <td> {{item.obj}}-{{item.Description}}</td>
            <td> {{ item.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            {% else %}
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            {% endif %}
            <td> {{  item.ytd_total  }}</td>
            <td> </td>
            <td> </td>
          </tr>
          {% endif %}
          {%endfor%}
          {% comment %} <tr class="dom">
            <td>  6400 - Other Operating Costs</td>
            <td> {{ data.total_budget_64 }} </td>
            {% if September == "True" %}
            <td>  {{  data.total_expend_6400_9  }} </a></td>
            <td>  {{  data.total_expend_6400_10 }} </a></td>
            <td>  {{  data.total_expend_6400_11 }} </a></td>
            <td>  {{  data.total_expend_6400_12 }} </a></td>
            <td>  {{  data.total_expend_6400_1  }} </a></td>
            <td>  {{  data.total_expend_6400_2  }} </a></td>
            <td>  {{  data.total_expend_6400_3  }} </a></td>
            <td>  {{  data.total_expend_6400_4  }} </a></td>
            <td>  {{  data.total_expend_6400_5  }} </a></td>
            <td>  {{  data.total_expend_6400_6  }} </a></td>
            <td>  {{  data.total_expend_6400_7  }} </a></td>
            <td>  {{  data.total_expend_6400_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_expend_6400_7  }} </a></td>
            <td>  {{  data.total_expend_6400_8  }} </a></td>
            <td>  {{  data.total_expend_6400_9  }} </a></td>
            <td>  {{  data.total_expend_6400_10 }} </a></td>
            <td>  {{  data.total_expend_6400_11 }} </a></td>
            <td>  {{  data.total_expend_6400_12 }} </a></td>
            <td>  {{  data.total_expend_6400_1  }} </a></td>
            <td>  {{  data.total_expend_6400_2  }} </a></td>
            <td>  {{  data.total_expend_6400_3  }} </a></td>
            <td>  {{  data.total_expend_6400_4  }} </a></td>
            <td>  {{  data.total_expend_6400_5  }} </a></td>
            <td>  {{  data.total_expend_6400_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_expend_6400_ytd}}</td>
            <td> {{ data.total_PB_6400 }}  </td>
            <td> </td>
          </tr> {% endcomment %}
          {% for item in unique_objcodes %}
          {% if item.Category == 'Debt Services' and fund == item.fund %}
          <tr class="dom d-none">
            <td> {{item.obj}}-{{item.Description}}</td>
            <td> {{ item.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            {% else %}
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            {% endif %}
            <td>{{  item.ytd_total  }} </td>
            <td> </td>
            <td> </td>
          </tr>
          {% endif %}
          {%endfor%}
          {% comment %} <tr class="dom">
            <td> 6500 - Debt Services </td>
            <td> {{ data.total_budget_65 }}</td>
            {% if September == "True" %}
            <td>  {{  data.total_expend_6500_9  }} </a></td>
            <td>  {{  data.total_expend_6500_10 }} </a></td>
            <td>  {{  data.total_expend_6500_11 }} </a></td>
            <td>  {{  data.total_expend_6500_12 }} </a></td>
            <td>  {{  data.total_expend_6500_1  }} </a></td>
            <td>  {{  data.total_expend_6500_2  }} </a></td>
            <td>  {{  data.total_expend_6500_3  }} </a></td>
            <td>  {{  data.total_expend_6500_4  }} </a></td>
            <td>  {{  data.total_expend_6500_5  }} </a></td>
            <td>  {{  data.total_expend_6500_6  }} </a></td>
            <td>  {{  data.total_expend_6500_7  }} </a></td>
            <td>  {{  data.total_expend_6500_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_expend_6500_7  }} </a></td>
            <td>  {{  data.total_expend_6500_8  }} </a></td>
            <td>  {{  data.total_expend_6500_9  }} </a></td>
            <td>  {{  data.total_expend_6500_10 }} </a></td>
            <td>  {{  data.total_expend_6500_11 }} </a></td>
            <td>  {{  data.total_expend_6500_12 }} </a></td>
            <td>  {{  data.total_expend_6500_1  }} </a></td>
            <td>  {{  data.total_expend_6500_2  }} </a></td>
            <td>  {{  data.total_expend_6500_3  }} </a></td>
            <td>  {{  data.total_expend_6500_4  }} </a></td>
            <td>  {{  data.total_expend_6500_5  }} </a></td>
            <td>  {{  data.total_expend_6500_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_expend_6500_ytd}}</td>
            <td> {{ data.total_PB_6500 }}  </td>
            <td> </td>
          </tr> {% endcomment %}
          

          {% for item in unique_objcodes %}
          {% if item.Category == 'Fixed/Capital Assets' and fund == item.fund %}
          <tr class="dom d-none">
            <td> {{item.obj}}-{{item.Description}}</td>
            <td> {{ item.total_budget }}</td>
            {% if September == "True" %}
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            {% else %}
            <td>  {{  item.total_activities7  }} </a></td>
            <td>  {{  item.total_activities8  }} </a></td>
            <td>  {{  item.total_activities9  }} </a></td>
            <td>  {{  item.total_activities10 }} </a></td>
            <td>  {{  item.total_activities11 }} </a></td>
            <td>  {{  item.total_activities12 }} </a></td>
            <td>  {{  item.total_activities1  }} </a></td>
            <td>  {{  item.total_activities2  }} </a></td>
            <td>  {{  item.total_activities3  }} </a></td>
            <td>  {{  item.total_activities4  }} </a></td>
            <td>  {{  item.total_activities5  }} </a></td>
            <td>  {{  item.total_activities6  }} </a></td>
            {% endif %}
            <td> {{  item.ytd_total  }}</td>
            <td> </td>
            <td> </td>
          </tr>
          {% endif %}
          {%endfor%}
          {% comment %} <tr class="dom">
            <td> 6600 - Fixed/Capital Assets</td>
            <td> {{ data.total_budget_66 }} </td>
            {% if September == "True" %}
            <td>  {{  data.total_expend_6600_9  }} </a></td>
            <td>  {{  data.total_expend_6600_10 }} </a></td>
            <td>  {{  data.total_expend_6600_11 }} </a></td>
            <td>  {{  data.total_expend_6600_12 }} </a></td>
            <td>  {{  data.total_expend_6600_1  }} </a></td>
            <td>  {{  data.total_expend_6600_2  }} </a></td>
            <td>  {{  data.total_expend_6600_3  }} </a></td>
            <td>  {{  data.total_expend_6600_4  }} </a></td>
            <td>  {{  data.total_expend_6600_5  }} </a></td>
            <td>  {{  data.total_expend_6600_6  }} </a></td>
            <td>  {{  data.total_expend_6600_7  }} </a></td>
            <td>  {{  data.total_expend_6600_8  }} </a></td>
            {% else %}
            <td>  {{  data.total_expend_6600_7  }} </a></td>
            <td>  {{  data.total_expend_6600_8  }} </a></td>
            <td>  {{  data.total_expend_6600_9  }} </a></td>
            <td>  {{  data.total_expend_6600_10 }} </a></td>
            <td>  {{  data.total_expend_6600_11 }} </a></td>
            <td>  {{  data.total_expend_6600_12 }} </a></td>
            <td>  {{  data.total_expend_6600_1  }} </a></td>
            <td>  {{  data.total_expend_6600_2  }} </a></td>
            <td>  {{  data.total_expend_6600_3  }} </a></td>
            <td>  {{  data.total_expend_6600_4  }} </a></td>
            <td>  {{  data.total_expend_6600_5  }} </a></td>
            <td>  {{  data.total_expend_6600_6  }} </a></td>
            {% endif %}
            <td> {{ data.total_expend_6600_ytd}}</td>
            <td> {{ data.total_PB_6600 }} </td>
            <td> </td>
          </tr> {% endcomment %}
          
          
          <tr class="super-dom">
            <td>{{ fund }} - {{ data.name}} </td>
            <td> {{ data.total_budget_RE }}</td>

            {% if September == "True" %}
            <td>  {{  data.total_RE_9  }}</td>
            <td>  {{  data.total_RE_10 }}</td>
            <td>  {{  data.total_RE_11 }}</td>
            <td>  {{  data.total_RE_12 }}</td>
            <td>  {{  data.total_RE_1  }}</td>
            <td>  {{  data.total_RE_2  }}</td>
            <td>  {{  data.total_RE_3  }}</td>
            <td>  {{  data.total_RE_4  }}</td>
            <td>  {{  data.total_RE_5  }}</td>
            <td>  {{  data.total_RE_6  }}</td>
            <td>  {{  data.total_RE_7  }}</td>
            <td>  {{  data.total_RE_8  }}</td>
            {% else %}
            <td>  {{  data.total_RE_7  }}</td>
            <td>  {{  data.total_RE_8  }}</td>
            <td>  {{  data.total_RE_9  }}</td>
            <td>  {{  data.total_RE_10 }}</td>
            <td>  {{  data.total_RE_11 }}</td>
            <td>  {{  data.total_RE_12 }}</td>
            <td>  {{  data.total_RE_1  }}</td>
            <td>  {{  data.total_RE_2  }}</td>
            <td>  {{  data.total_RE_3  }}</td>
            <td>  {{  data.total_RE_4  }}</td>
            <td>  {{  data.total_RE_5  }}</td>
            <td>  {{  data.total_RE_6  }}</td>
            {% endif %}

            <td>{{ data.total_RE_ytd}} </td>
            <td> {{ data.total_PB_RE }} </td>
            <td> </td>
          </tr>

          {% endfor %} 

          <!-- END OF REVENUE-->
         
         


          
   


 
  
          {% comment %} {% for fund, data in expend_fund.items %}
          <tr class="super-dom">
            <td>{{ fund }} </td>

            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
          </tr>

          
          

          {% endfor %}  {% endcomment %}

          
          <tr class="ender">
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          


        </tbody>
      </table>
    </div>
  </div>

</div>


{% block javascript %}


<script>
  document.addEventListener('DOMContentLoaded', function(){
  
    
    //checkBalance()

    // order is important here
    // formattings first (hide, show, format) then computations


    ///////////////////////// format table //////////////////////////////////
    const tableMain = document.getElementById('table-main')
    tableFormatter(tableMain)
    tableFormatter2(tableMain)
    //tableFormatter3(tableMain)
    ///////////////////////// show hide stuff ///////////////////////////
    // hide months
    const monthHeaders = document.querySelectorAll('.month')
    const allRows = document.querySelectorAll('#table-main tbody tr')

    hideMonths()


    
    // show per quarter
    const quarterLinks = document.querySelectorAll('#quarter-tabs > a')


    // make active quarter tab
    const quarters = Math.ceil(monthHeaders.length / 3)
    if (quarters >= 1){
      for (let i=1; i <= quarters; i++){
        quarterLinks[i].classList.remove('not-active')
      }
    }

    quarterLinks.forEach((link, index) => {
      link.addEventListener('click', (event) => showMonths(event, index))
    });
    const titleDoms = document.querySelectorAll('.title-dom > :first-child')
    titleDoms.forEach(element => {
        // Add an event listener to each element
        element.addEventListener('click', showHideTitle);
    });
    // show/hide doms
    const superDoms = document.querySelectorAll('.super-dom > :first-child')
    
    superDoms.forEach(element => {
        // Add an event listener to each element
        element.addEventListener('click', showHideDoms);
    });

    // show/hide subs
    const doms = document.querySelectorAll('.dom > :first-child')
    
    doms.forEach(element => {
        // Add an event listener to each element
        element.addEventListener('click', showHideSubs);
    });

    $("#toggleRow").on("change", function(event) {
      //titleDoms.forEach(element => {
      //    const clickEvent = new Event('click');
      //    const parentTR = element.closest('tr'); 
      //    let prevTR = parentTR
      //    while (prevTR = prevTR.nextElementSibling) {
      //      if (prevTR.classList.contains('super-dom') || prevTR.classList.contains('dom')) {    
      //        if ($('#toggleRow').is(':checked')){
      //          if (prevTR.classList.contains('d-none')){
      //            element.dispatchEvent(clickEvent);
      //            break;
      //            }else{
      //            break;
      //          }
      //          }else{
      //          if (prevTR.classList.contains('d-none')){
      //            
      //            break;
      //            }else{
      //              element.dispatchEvent(clickEvent);
      //            break;
      //          }
      //        }
  //
      //      }
      //    }    
      //});
      superDoms.forEach(element => {
        const clickEvent = new Event('click');
        const parentTR = element.closest('tr'); 
        let prevTR = parentTR

        while (prevTR = prevTR.nextElementSibling) {
          if (prevTR.classList.contains('super-dom') || prevTR.classList.contains('dom')) {
            console.log(prevTR)
            if ($('#toggleRow').is(':checked')){
              if (prevTR.classList.contains('d-none')){
                
                element.dispatchEvent(clickEvent);
                break;
                }else{
                break;
              }
            }else{
              if (prevTR.classList.contains('d-none')){
                
                break;
                }else{
                  element.dispatchEvent(clickEvent);
                break;
              }
            }

          }
        }        
      });
  
    })


    //////////////////// Modal table //////////////////////////////////////
    // add bottom borders to table
    const domElements = document.querySelectorAll('.super-dom');
    domElements.forEach(element => {
      //const previousSibling = element.previousElementSibling
      //if (previousSibling && previousSibling.classList.contains('dom')) {
      //    // Perform actions on the 'sub' element
      //    const cells = previousSibling.querySelectorAll('td')
      //    cells.forEach(cell => cell.style.paddingBottom = '1rem')
      //    previousSibling.style.borderTop = '2px solid #e4e4e4';
      //}
      element.style.borderBottom = '2px solid #e4e4e4';

    })
    // domElements.forEach(element => {
    //     // Check if the previous sibling of 'main' has class 'sub'
    //     if (element.previousElementSibling && (element.previousElementSibling.classList.contains('sub') || element.previousElementSibling.classList.contains('dom')  )) {
    //         // Perform actions on the 'sub' element
    //         const cells = element.previousElementSibling.querySelectorAll('td')
    //         cells.forEach(cell => cell.style.paddingBottom = '1rem')
    //         element.style.borderTop = '2px solid #e4e4e4';
    //     }
    // });


    // add | borders to headers 
    const tableMainHeaders = document.querySelectorAll('#table-main th ')
    for(let i = 0; i < tableMainHeaders.length - 1; i++){
      tableMainHeaders[i].classList.add('partial-border-right')
    }

    const tableHeaders = document.querySelectorAll('.modal-table th')
    for(let i = 0; i < tableHeaders.length - 1; i++){
      tableHeaders[i].classList.add('partial-border-right')
    }

    // populate the modal table
    $('#sample-button').on('click', function(){
    
      $('#view-modal').modal('show')
    })


    //////////////////// net income total months ///////////////////////
    //
    //computeNetIncomeVisible()


    ////////////////////////// functions /////////////////////////////////

    //  put in utils/formatters.js
    function accountingToInteger(formattedNum){
      // what if undefined or NaN or ''? 
      if (formattedNum === undefined || formattedNum === '' ) {
        return 0;
      } 

      // remove $ and comma 
      let deformattedNum = formattedNum.replace(/\$|,/g, '')
      let number

      // handle error for when formattedNum is an unexpected type
      try {
        if (deformattedNum.includes('(')) {
          // remove parenthesis and return negative num
          deformattedNum = deformattedNum.replace(/\(|\)/g, '')
          number = -Number(deformattedNum)
        } else {
          number = Number(deformattedNum)
        }
        return number
      } catch (error) {
        console.log(error)
        return 0
      } 
    }

    //  put in utils/formatters.js``
    function integerToAccounting(num, decimal=false){
      let opts = {}
      // if NaN or undefined
      if (num === undefined || Number.isNaN(num)){
        return ''
      }

      if (decimal){
        opts = {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          }
      }

      try {
        if (num < 0){
          return `$(${
            Math.abs(num).toLocaleString(undefined, opts) 
        })`
        } else {
          return `$${num.toLocaleString(undefined, opts)}`
        }
      } catch (error) {
        console.log(error)
        return ''
      }
    }

    //  put in utils/formatters.js ???
    function tableFormatter(mainTableDiv){
      const rows = mainTableDiv.querySelectorAll('tbody tr')

      rows.forEach(row => {
        const columns = Array.from(row.children);

        // count empty divs this is because we want to hide/remove these divs
        let emptyCounter = 0

        // skip 0 because 0 is just the title 
        for (let i = 1; i < columns.length; i++){
          let existingLink = columns[i].querySelector('a');

          // handle nulls and undefined


          if(columns[i].textContent.trim() === '' || columns[i].textContent === ' ') {
            
            emptyCounter++
            
            continue
          }

          // if has content but no dollar
          /*if (!columns[i].textContent.includes('$')) {
            columns[i].textContent = '$' + columns[i].textContent.trim()
          }*/

          // now for the up caret or down caret
          if (columns[i].textContent.includes('(')) {  
            if (existingLink) {
              existingLink.style.color = 'red';
            }else{
              columns[i].style.setProperty('color', 'red', 'important');
            } 
            columns[i].innerHTML = `
            ${existingLink ? existingLink.outerHTML: columns[i].textContent}
              
            `
            //<i class="fa-solid fa-caret-down downswing"></i>
          } 
          else {
            columns[i].classList.add('upswing')
            if (existingLink) {
              existingLink.style.color = '#29ab87';
            }
            columns[i].innerHTML = `
            ${existingLink ? existingLink.outerHTML :   columns[i].textContent}
              
            `  
            //<i class="fa-solid fa-caret-up"></i>        
          }
            existingLink ='null'
        }

        // remove empty rows
        //console.log(emptyCounter)
        //console.log(emptyCounter)
        if (emptyCounter === (columns.length - 1)){
          // row.style.display = 'none'

          if (row.classList.contains('super-dom') || row.classList.contains('title-dom')) {
            console.log("0")
          }else{
            row.remove()
          }
             
          
          
         
         
        }
      })
    } //end of tableFormatter

    function tableFormatter2(mainTableDiv){
      const rows = mainTableDiv.querySelectorAll('tbody tr')
     
      rows.forEach((row, index) => {
        const nextRow = rows[index + 1]; // Get the next row
        
        if (nextRow && nextRow.classList.contains('super-dom') && row.classList.contains('super-dom')) {
       
          row.remove(); // Remove the current row if it and the next row both have class 'super-dom'
      }
      //if (nextRow && nextRow.classList.contains('title-dom') && row.classList.contains('super-dom')) {
//
      //  row.remove(); // Remove the current row if it and the next row both have class 'super-dom'
      //}
    });


    } 
    function tableFormatter3(mainTableDiv){
      const rows = mainTableDiv.querySelectorAll('tbody tr')
     
      rows.forEach((row, index) => {
        const nextRow = rows[index + 1]; // Get the next row
        
        if (nextRow && nextRow.classList.contains('title-dom') && row.classList.contains('title-dom')) {
          console.log(row);
          nextRow.remove(); // Remove the current row if it and the next row both have class 'super-dom'
      }

    });


    } 


    function showHideTitle(event){
      const section = event.currentTarget.closest('tr')
      const rowIndex = section.rowIndex
      const tBody = section.closest('tbody')
    
      const rows = tBody.rows


      for (let i = rowIndex-2; i <= rows.length; i--){

        if (rows[i].classList.contains('ender')){
          
          break
        }
        
        if (rows[i].classList.contains('title-dom')){
          
          break
        }
        

        if (rows[i].classList.contains('dom') && rows[i].classList.contains('d-none')){
          continue
        }

        if (rows[i].classList.contains('sub') && rows[i].classList.contains('d-none')){
          continue
        }
        rows[i].classList.toggle('d-none')
      }

    }
    
    function showHideDoms(event){
      const section = event.currentTarget.closest('tr')
      const rowIndex = section.rowIndex 
  
      const tBody = section.closest('tbody')
      const rows = tBody.rows
 
      for (let i=rowIndex-2; i >= 0 ; i--){
    
        if (rows[i].classList.contains('super-dom')){
          break
        }
        
        if (rows[i].classList.contains('title-dom')){
          break
        }
        if (rows[i].classList.contains('title-dom') && rows[i].classList.contains('d-none')){
          continue
        }
        // hide also the subs that does not have d-none
        if (rows[i].classList.contains('sub') && rows[i].classList.contains('d-none')){
          continue
        }


        rows[i].classList.toggle('d-none')
      }
    } // end of showHideDoms

    function showHideSubs(event){
      const section = event.currentTarget.closest('tr')
     
      let prevElem = section.previousElementSibling;


     // let nextElem = section.nextElementSibling;


      while (prevElem.classList.contains('sub')) {
        // const cells = nextElem.querySelectorAll('td')
        // console.log(cells)
        // cells.forEach(cell => cell.classList.toggle('d-none'))
        prevElem.classList.toggle('d-none')
        prevElem = prevElem.previousElementSibling;
      }
    } // end of showHideSubs

    function showMonths(event, quarter=0){
   
      event.preventDefault()
      // if active is not in the link that is clicked 
      // then either another button is active or there is no other button that is active
      // in that case hide all months
      if (!event.currentTarget.classList.contains('active')){
        hideMonths()     
        
        
      }

   
      // change title of netIncome
     // const netTitle = event.currentTarget.textContent.trim() !== 'Show all' ? `${event.currentTarget.textContent} - Net Income` : 'Net Income'

      // only one button should be active 
      // check if there's any other active ones then deactivate them
      // ignore if inactive
      const quarterLinks = document.querySelectorAll('#quarter-tabs > a:not(.not-active)')
      quarterLinks.forEach(link => {
        // ignore if th is the same as event
        if(link.textContent === event.currentTarget.textContent){
          return
        }

        if(link.classList.contains('active')){
          link.classList.toggle('active')
        }
      })
      event.currentTarget.classList.toggle('active')

      

      const monthHeaders = document.querySelectorAll('.month')
      const allRows = document.querySelectorAll('#table-main tbody tr')
      let monthIdx = []

      
      var lm = parseInt("{{months.last_month_number}}", 10); //last month number
      //get the  start of the cell index to show/hide

      if (sept == "True"){
        if(lm >=  9){
          th_start  = lm - 9
        }else{
          th_start  = lm + 3
        }
       
      }else{
        if(lm >  7){
          th_start  = lm - 7
        }else{
          th_start  = lm + 5
        }
      }


      // figure out the index of months to hide or show
      if (quarter === 0){
    
           /*  monthHeaders.forEach(th => {
                  th.classList.toggle('d-none')
                  monthIdx.push(th.cellIndex)
                }) */
        for (let i = 0; i <= th_start; i++){
      
            const th = monthHeaders[i] 
            if (th){
              th.classList.toggle('d-none')
              monthIdx.push(th.cellIndex)
            }
          }
      }
      else {
        for (let i = 0; i < 3; i++) {
          const index = 3 * (quarter - 1) + i
        
          if (index < monthHeaders.length){
            const th = monthHeaders[index]
        
            // what if undefined header
            if (th){
              th.classList.toggle('d-none')
              monthIdx.push(th.cellIndex)
            }
          }
          else {
            break
          }
        }
      }
      // hide the rows with the same index as month header
      allRows.forEach(row => {
        const cells = Array.from(row.children)
        for( const idx of monthIdx){
          cells[idx].classList.toggle('d-none')
        }
      })
      // update net income
      //computeNetIncomeVisible()
      // change title of net income
      //$('.net-title').text(netTitle)




    } // end of showMonths function

    function hideMonths(){
      var lm = parseInt("{{months.last_month_number}}",10); //last month number
      let monthIdx = []
      
      let skipth = "";      

      if (sept == "True"){
        if(lm >=  9){
          skipth  = lm - 7
          
        }else{
          skipth  = lm + 4
       
        }
       
      }else{
        if(lm >  7){
          skipth  = lm - 7
          
        }else{
          skipth  = lm + 4
        }
      }
      if (frontshowcurr == "True"){
        monthHeaders.forEach((th, index) => {
          // Skip hiding if the month header is the last month
          if (index + 1 !== skipth) {
            if (!th.classList.contains('d-none')) {
              th.classList.toggle('d-none');
              monthIdx.push(th.cellIndex);
            }
          }
        });
      }else{
        monthHeaders.forEach(th => {
          if (!th.classList.contains('d-none')){
            th.classList.toggle('d-none')
            monthIdx.push(th.cellIndex)
          }
        })
      }

 
      allRows.forEach(row => {
        const cells = Array.from(row.children)
        for( const idx of monthIdx){
          cells[idx].classList.toggle('d-none')
        }
      })
    } // end of hideMonths


    /*function showCurr() {


      var lm = last_month_number  - 2;    
      var colorColumn = document.querySelectorAll(
        "#table-main td:nth-child(" + lm + ")"
      );

    
      for (var k = 0; k < colorColumn.length; k++) {
        colorColumn[k].classList.toggle('hidden-column');      
        colorColumn[k].classList.toggle('d-none');        
      }
   
      const monthHeaders = document.querySelectorAll('.month')
      const th = monthHeaders[lm - 4 ] 
      if(th){
        th.classList.toggle('d-none')

      }

  }*/

  function showBudget() {


   
    var budgetTable = document.querySelectorAll(
      "#table-main th:nth-child(2), " +
      "#table-main td:nth-child(2) " 

  );
  
    for (var k = 0; k < budgetTable.length; k++) {
 
      budgetTable[k].classList.toggle('d-none');        
    }
 


}

$("#showBudget").on("change", function(event) {

  showBudget();

  })

  $("#showCurr").on("change", function(event) {
    if ($('#showCurr').is(':checked')){
      showcurrentMonthFront();
  
    }else{
      hidecurrentMonthFront();
    }


    })


    function computeNetIncomeVisible() {
      // ytd net income 
      const allNetIncome = $('#all-net-total').text()
      // check quarter tabs if nothing is active return ytd net income
      const quarterLinks = document.querySelectorAll('#quarter-tabs > a')
      const quarterLinksNotActive = document.querySelectorAll('#quarter-tabs > a:not(.active)')
      if (quarterLinksNotActive.length === quarterLinks.length) {
        $('.quarter-net-total').text(allNetIncome)
        return
      }

      const headerNetIncomes = document.querySelectorAll('.monthly-net-total')
      const arrayNetIncomes = Array.from(headerNetIncomes)
      const totalNetIncome = arrayNetIncomes.reduce((acc, curr) => {
        const th = curr.closest('th')
        if (th.classList.contains('d-none')) return acc // ignore th that is not displayed

        return acc + accountingToInteger(curr.textContent)
      }, 0)

      $('.quarter-net-total').text(integerToAccounting(totalNetIncome))

      netIncomeColor();
    } //end of computeNetIncomeVisible 

    function netIncomeColor() {
      const nets = document.getElementsByClassName('quarter-net-total');
    
      for (let i = 0; i < nets.length; i++) {
        const net = nets[i];
    
        if (net.textContent.includes('(')) {
          net.style.color = 'red';
        } else {
          net.style.color = '#29ab87'; // You had 'red' here, consider changing it to another color if needed
        }
      }
    }
    //netIncomeColor()



    /*function checkBalance() {
      const NetSurplusRow = document.getElementById("net-surplus-deficit");
      const NetIncomeRow = document.getElementById("net-income");
      
      
      if (!NetSurplusRow || !NetIncomeRow) {
        return; 
      }
      
      const NetSurplusCells = NetSurplusRow.cells;
      const NetIncomeCells = NetIncomeRow.cells;
      
      let match = true;
  
      
      for (let i=1; i <= last_month_number-2; i++) {
        console.log(NetSurplusCells[i])
        const NetSurplusValue = NetSurplusCells[i].textContent.trim();
        const NetIncomeValue = NetIncomeCells[i].textContent.trim();

      
  
        if (NetIncomeValue !== NetSurplusValue) {
          NetSurplusCells[i].style.backgroundColor = "yellow";
          NetIncomeCells[i].style.backgroundColor = "yellow";
     
          match = false;
         
        }
      }


      
      return match;
    }*/

  })

</script>


{% endblock %}